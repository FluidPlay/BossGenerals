
;------------------------------------------------------------------------------
Object CTFAmericaVehicleHumvee

  ; *** ART Parameters ***
  SelectPortrait         = SAHummer_L
  ButtonImage            = SAHummer
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaTOWMissile
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaHellfireDrone
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = AVHUMMER
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 Housecolor03 MuzzleFXUP01
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
    End

    ConditionState = REALLYDAMAGED
      Model = AVHUMMER_d
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 Housecolor03 MuzzleFXUP01
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = AVHUMMER
      Turret = TurretUp01
      HideSubObject = Turret MuzzleFX01
      ShowSubObject = TurretUp01 Housecolor03
      WeaponFireFXBone = PRIMARY MuzzleUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponFireFXBone = SECONDARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB
      WeaponLaunchBone = TERTIARY WeaponB
    End

    ConditionState = REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = AVHUMMER_d
      Turret = TurretUp01
      HideSubObject = Turret MuzzleFX01
      ShowSubObject = TurretUp01 Housecolor03
      WeaponFireFXBone = PRIMARY MuzzleUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponFireFXBone = SECONDARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB
      WeaponLaunchBone = TERTIARY WeaponB
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 1.25   ; This speed is added to the rotation speed when powersliding.

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Humvee
  Side                  = America
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY HumveeGun
    Weapon = SECONDARY HumveeMissileWeaponAirDummy
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY HumveeGun
    Weapon = SECONDARY CTFHumveeMissileWeapon ;[B]CTF
    Weapon = TERTIARY HumveeMissileWeaponAir
    PreferredAgainst = TERTIARY     AIRCRAFT
  End

  ArmorSet
    Conditions      = None
    Armor           = HumveeArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 1150 ;700
  BuildTime       = 20.0 ;[B]10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 320
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End
  ExperienceValue = 100 100 150 200 ;[B]50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = AmericaVehicleHumveeCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = HumveeVoiceSelect
  VoiceMove = HumveeVoiceMove
  VoiceGuard = HumveeVoiceMove
  VoiceAttack = HumveeVoiceAttack
  VoiceAttackAir = HumveeVoiceAttackTOW
  SoundMoveStart = HumveeMoveStart
  SoundMoveStartDamaged = HumveeMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    ;TurretMoveStart    = NoSound
    VoiceCreate         = HumveeVoiceCreate
    TurretMoveLoop      = TurretMoveLoop
    SoundEject          = PilotSoundEject
    VoiceEject          = PilotVoiceEject
    VoiceCrush          = HumveeVoiceCrush
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceUnload = HumveeVoiceUnload
    VoiceEnter = HumveeVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE TRANSPORT

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Locomotor = SET_NORMAL HumveeLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = TransportContain  ModuleTag_05
    PassengersAllowedToFire = Yes
    Slots             = 5
;    EnterSound          = GarrisonEnter
;    ExitSound           = GarrisonExit
    BurnedDeathToUnits   = Yes ; [B] Burning, dramatic death to remind players to STOP ABUSING MDVs :P
    DamagePercentToUnits = 100% ;10%
    AllowInsideKindOf  = INFANTRY
    ExitDelay = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = ObjectCreationUpgrade ModuleTag_06
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_14
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End

  Behavior = ProductionUpdate ModuleTag_08
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = WeaponSetUpgrade ModuleTag_09
    TriggeredBy = Upgrade_AmericaTOWMissile
  End
  Behavior = ExperienceScalarUpgrade ModuleTag_10
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = SlowDeathBehavior ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 25
    DestructionDelay = 1
    OCL = INITIAL  OCL_InitialHumveeDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
    OCL = FINAL    OCL_FinalHumveeDebris
  End

  Behavior = DestroyDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

; This is commented out per hotlist request 10/9 ML
;  Behavior = CreateObjectDie ModuleTag_15
;    DeathTypes = ALL -CRUSHED -SPLATTED
;    CreationList = OCL_AmericanRangerDebris01
;    ExemptStatus = HIJACKED
;  End

  Behavior = EjectPilotDie ModuleTag_16
    DeathTypes = ALL -CRUSHED -SPLATTED
    ExemptStatus = HIJACKED
    ; The following added out per hotlist request 10/9 as above ML
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End













;----------------------------------------------------------
Object CTFAmericaVehicleTomahawk

  ; *** ART Parameters ***
  SelectPortrait         = SACTomahawk_L
  ButtonImage            = SACTomahawk
  
  UpgradeCameo1 = Upgrade_AmericaScoutDrone
  UpgradeCameo2 = Upgrade_AmericaBattleDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaDeltaEngine ;[B]Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaTomahawkChaining
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
      
    ProjectileBoneFeedbackEnabledSlots = PRIMARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model = AVTomahawk
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponHideShowBone = PRIMARY MISSILE
    End

    ConditionState = REALLYDAMAGED
      Model = AVTomahawk_D
    End
    AliasConditionState = RUBBLE

    TrackMarks           = EXTnkTrack.tga

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Tomahawk
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost       = 1800 ;1200
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFAmericaStrategyCenter
  End
  ExperienceValue = 100 100 150 200 ;[B]50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TomahawkMissileWeapon
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY ARTomahawkMissileWeapon ;TomahawkMissileWeapon
    Weapon = SECONDARY TomahawkSiegeMissileWeapon
    AutoChooseSources   = SECONDARY   NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = SiegeTankArmor ;[B]TruckArmor
    DamageFX        = TankDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = AmericaVehicleTomahawkCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TomahawkVoiceSelect
  VoiceMove = TomahawkVoiceMove
  VoiceGuard = TomahawkVoiceMove
  VoiceAttack = TomahawkVoiceAttack
  SoundMoveStart = TomahawkMoveStart
  SoundMoveStartDamaged = TomahawkMoveStart
  
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = TomahawkVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = TomahawkVoiceMove
    VoiceBombard = TomahawkVoiceAttack
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE DONT_AUTO_CRUSH_INFANTRY CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 270.0 ;180.0
    InitialHealth   = 270.0 ;180.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 80    ; [B]60 turn rate, in degrees per sec
      TurretPitchRate = 60
      FirePitch = 60  ; [B]70 ;Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY ;[B]
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End
  Locomotor = SET_NORMAL TomahawkLocomotor
  Locomotor = SET_NORMAL_UPGRADED TomahawkDeltaLocomotor ;[B]R2 new

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleTomahawkDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = ObjectCreationUpgrade ModuleTag_06
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_15
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End

;[B] Tomahawk Chaining Siege Mode
  Behavior = AssistedTargetingUpdate ModuleTag_16
    AssistingClipSize = 2                       ; How many shots to make when asked by someone of my kind who has a RequestAssistRange weapon
    AssistingWeaponSlot = SECONDARY             ; And the weapon to use.  Should have huge range and no natural clip.
    LaserFromAssisted = TomahawkChainingStream ; Stream to draw from the requestor to me
    LaserToTarget = TomahawkChainingStream     ; Stream to draw from me to the target
  End

  Behavior = WeaponSetUpgrade ModuleTag_17
    TriggeredBy = Upgrade_AmericaTomahawkChaining
  End

  Behavior = LocomotorSetUpgrade ModuleTag_Locomotorupgrade
    TriggeredBy = Upgrade_AmericaDeltaEngine
  End

  Behavior = ProductionUpdate ModuleTag_08
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_09
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = DestroyDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

;  Behavior = FXListDie
;    DeathTypes = ALL -CRUSHED -SPLATTED
;    DeathFX = FX_GenericTankDeathEffect
;  End
; Behavior = CreateObjectDie
;    DeathTypes = ALL -CRUSHED -SPLATTED
;    CreationList = OCL_GenericTankDeathEffect
;  End
  Behavior = EjectPilotDie ModuleTag_13
    DeathTypes = ALL -CRUSHED -SPLATTED
    ExemptStatus = HIJACKED
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
  End
  
  Behavior = TransitionDamageFX ModuleTag_14
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End














;[B]In Boss, properly skinned as the repair ambulance  ------------------------------------------
; Also known as the Ambulance (or as "dA pwn3r0r" in ZH after 1.02 :) )
Object CTFAmericaVehicleMedic

  ; *** ART Parameters ***
  SelectPortrait         = SSB_RepairAmbulance ;[B]SAAmbulance_L
  ButtonImage            = SB_RepairAmbulance ;[B]SAAmbulance
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01

    ConditionState = NONE
      Model = AVAmbulance
      Turret = Turret
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End
    ConditionState       = REALLYDAMAGED
      Model              = AVAmbulance_D
      Turret = Turret
      TurretPitch = TurretEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End      
    
    ConditionState       = RUBBLE
      Model              = AVAmbulance_D
    End      
    
    TrackMarks = EXTireTrack.tga
    OkToChangeModelColor = Yes

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition = 2.5    ; This speed is added to the rotation speed when powersliding.


  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Medic
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet 
    ;*** Fully automated and driven by the CleanupHazardUpdate ***
    Conditions        = None 
    Weapon            = PRIMARY AmbulanceCleanHazardWeapon 
    AutoChooseSources = PRIMARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = ToxinTruckArmor 
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 900  ;600
  BuildTime       = 20.0 ;10.0          ;in seconds    
  VisionRange     = 100
  ShroudClearingRange = 400
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End
  ExperienceValue = 75 75 75 75 ;[B]50 50 50 50   ;Experience point value at each level
  IsTrainable     = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = AmericaVehicleAmbulanceCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect = AmbulanceVoiceSelect
  VoiceMove = AmbulanceVoiceMove
  VoiceGuard = AmbulanceVoiceMove
  VoiceAttack = AmbulanceVoiceDetox
  SoundMoveStart = HumveeMoveStart
  SoundMoveStartDamaged = HumveeMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = AmbulanceVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceCrush          = AmbulanceVoiceCrush
    VoiceEnter = AmbulanceVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SCORE TRANSPORT
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = CleanupHazardUpdate ModuleTag_03
    WeaponSlot            = PRIMARY
    ScanRate              = 1000
    ScanRange             = 100.0 ;If this range exceeds the AmbulanceCleanHazardWeapon AttackRange, it'll move!
  End

  ;Can be ordered to clean up a larger area with the ability to move around at an extended range.
  Behavior = CleanupAreaPower ModuleTag_04
    SpecialPowerTemplate          = SpecialAbilityAmbulanceCleanupArea
    MaxMoveDistanceFromLocation   = 300.0 ;allows the unit to move around while cleaning up
    InitiateSound = AmbulanceVoiceDetox
  End

  Behavior = TransportAIUpdate ModuleTag_05
   AutoAcquireEnemiesWhenIdle = No  ;CleanupHazardUpdate handles this...
   Turret
      TurretTurnRate = 180
      TurretPitchRate = 180
      AllowsPitch = Yes
      MinPhysicalPitch = -20 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      TurretFireAngleSweep = PRIMARY 25
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL MedicLocomotor ;[B]Amb now in back of groups; HumveeLocomotor

  Behavior = TransportContain ModuleTag_06
    Slots               = 3
    HealthRegen%PerSec  = 25
    DamagePercentToUnits = 10%
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
    ExitDelay = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 50.0
  End
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 0
    FX  = FINAL FX_GenericTankDeathExplosion
    OCL = FINAL OCL_FinalAmbulanceDebris
  End

  Behavior = ObjectCreationUpgrade ModuleTag_09
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_10
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_19
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End
  Behavior = ProductionUpdate ModuleTag_11
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = DestroyDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = FXListDie ModuleTag_15
    DeathTypes = ALL -CRUSHED -SPLATTED
    DeathFX = FX_GenericTankDeathEffect
  End

  Behavior = CreateCrateDie ModuleTag_16
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_17
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.

  End

  Behavior = AutoHealBehavior ModuleTag_22
    HealingAmount     = 4
    HealingDelay      = 1000 ; msec
    Radius            = 100.0f
    StartsActive      = Yes
    KindOf            = INFANTRY
  End
  Behavior = AutoHealBehavior ModuleTag_23
    HealingAmount     = 8
    HealingDelay      = 1000 ; msec
    Radius            = 100.0f
    StartsActive      = Yes
    KindOf            = VEHICLE
    ForbiddenKindOf   = AIRCRAFT
    SkipSelfForHealing = Yes
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0  ; height set to allow clear clipping of projectile streams   
  GeometryIsSmall = Yes   
  Shadow = SHADOW_VOLUME 

End

;------------------------------------------------------------------------------
Object CTFAmericaTankPaladin

  ; *** ART Parameters ***
  SelectPortrait         = SB_LaserPaladin ;[B]SAPaladin_L
  ButtonImage            = SB_LaserPaladin ;SAPaladin
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo4 = Upgrade_AmericaCompositeArmor
  UpgradeCameo5 = Upgrade_AmericaHellfireDrone

  Draw = W3DTankDraw ModuleTag_01
    
    ExtraPublicBone = Laser 

    ConditionState        = NONE
      Model               = AVPaladin
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY TurretMS
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
    End
    
    ConditionState        = REALLYDAMAGED
      Model               = AVPaladin_D
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY TurretMS
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
    End
    
    ConditionState        = RUBBLE
      Model               = AVPaladin_D
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY TurretMS
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
    End
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
    OkToChangeModelColor = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Paladin
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY PaladinTankGun
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor ;[B]0.99 = specialtankarmor
    DamageFX        = TankDamageFX
  End
  ;ArmorSet
  ;  Conditions      = PLAYER_UPGRADE
  ;  Armor           = UpgradedTankArmor
  ;  DamageFX        = TankDamageFX
  ;End
  BuildCost       = 1100
  BuildTime       = 13.0          ; 14 [B]12s in seconds    
  VisionRange     = 150
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_PaladinTank
  End

  ExperienceValue        = 125 150 300 500 ;100 100 200 400 ;Experience point value at each level
  ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level

  IsTrainable     = Yes  ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = AmericaTankPaladinCommandSet
    
  ; *** AUDIO Parameters ***
  VoiceSelect = PaladinTankVoiceSelect
  VoiceMove = PaladinTankVoiceMove
  VoiceGuard = PaladinTankVoiceMove
  VoiceAttack = PaladinTankVoiceAttack
  SoundMoveStart = PaladinTankMoveStart
  SoundMoveStartDamaged = PaladinTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = PaladinTankVoiceCreate
    TurretMoveLoop = TurretMoveLoop
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = PaladinTankVoiceCrush
    VoiceEnter = PaladinTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 500.0
    InitialHealth   = 500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 180 ;60   // turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    ;AltTurret
    ;  TurretTurnRate = 9000;
    ;  ControlledWeaponSlots = SECONDARY
    ;End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL CrusaderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  
  ; Turret fly off death
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
;    ModifierBonusPerOverkillPercent = 30%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 500
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_PaladinTankDeathEffect
  End
  
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_PaladinTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion 
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_07
    WeaponTemplate        = PaladinPointDefenseLaser
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    SecondaryTargetTypes  = INFANTRY
    ScanRate              = 500
    ScanRange             = 120.0
    PredictTargetVelocityFactor = 3.0
  End

  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_09
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End 
  Behavior = ObjectCreationUpgrade ModuleTag_19
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End Upgrade_AmericaHallfireDrone

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_11
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FXListDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = DestroyDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_16
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = EjectPilotDie ModuleTag_17
    DeathTypes = ALL -CRUSHED -SPLATTED
    ExemptStatus = HIJACKED
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
  End

  Behavior = MaxHealthUpgrade ModuleTag_18
    TriggeredBy   = Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 125 ;[B]100.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;[B] Guardian Sentry Drone
Object CTFAmericaVehicleSentryDrone

  ; *** ART Parameters ***
  SelectPortrait         = SB_SentryGuardian ;SAsentry_L
  ButtonImage            = SB_SentryGuardian ;SAsentry
  
  UpgradeCameo1 = Upgrade_AmericaDroneArmor ;[B]Upgrade_AmericaSentryDroneGun
  UpgradeCameo2 = Upgrade_AmericaSentryDroneGun
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 10
    MaxRecoilDistance    = 1.5
    RecoilSettleSpeed    = 3

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model                           = AVSENTRY
      Animation                       = AVSENTRY.AVSENTRY
      AnimationMode                   = LOOP
      Turret                          = TURRET01
      ShowSubObject                   = TURRETUP09
      ;HideSubObject                   = TURRETUP09  ;[B]Hide controlled turret
      WeaponFireFXBone  = PRIMARY   TurretFX
      WeaponMuzzleFlash = PRIMARY   TurretFX
      WeaponRecoilBone  = SECONDARY TurretUp  ;[B]R2
    End
    ConditionState                    = REALLYDAMAGED
      Model                           = AVSENTRY_D
      Animation                       = AVSENTRY_D.AVSENTRY_D
      AnimationMode                   = LOOP
      Turret                          = TURRET01
      ShowSubObject                   = TURRETUP09
      ;HideSubObject                   = TURRETUP09      ;Hide controlled turret
    End
    ConditionState                    = RUBBLE
      Model                           = AVSENTRY_D1
      HideSubObject                   = TURRETUP09      ;Hide controlled turret
    End
    AliasConditionState = RUBBLE WEAPONSET_PLAYER_UPGRADE 
    
    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model                           = AVSENTRY
      Animation                       = AVSENTRY.AVSENTRY
      AnimationMode                   = LOOP
      ShowSubObject                   = TURRETUP09
      WeaponFireFXBone  = PRIMARY   TurretFX
      WeaponMuzzleFlash = PRIMARY   TurretFX
      WeaponRecoilBone  = SECONDARY TurretUp  ;[B]R2
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model                           = AVSENTRY_D
      Animation                       = AVSENTRY_D.AVSENTRY_D
      AnimationMode                   = LOOP
      ShowSubObject                   = TURRETUP09
      WeaponFireFXBone  = PRIMARY   TurretFX
      WeaponMuzzleFlash = PRIMARY   TurretFX
      WeaponRecoilBone  = SECONDARY TurretUp  ;[B]R2
    End

    TrackMarks           = EXTnkTrack.tga
    TreadDebrisLeft      = SentryDroneTrackDebrisDirtLeft
    TreadDebrisRight     = SentryDroneTrackDebrisDirtRight
    TreadAnimationRate   = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:SentryDrone
  Side               = America
  EditorSorting      = VEHICLE
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY SentryDroneGun
  End
;[B]JackHammer upgraded weaponset
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY   SentryDroneGun
    Weapon = SECONDARY SentryJackhammerWeapon
;    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY NONE
;    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  ArmorSet
    Conditions      = None
    Armor           = SentryDroneArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 1100 ;800
  BuildTime       = 16.0 ;8.0          ;[B]10 in seconds    
  VisionRange     = 300		 ;[B]200
  ShroudClearingRange = 400      ;[B]350
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue = 75 75 150 200 ;[B]50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = No             ;Can gain experience
  CrusherLevel           = 0  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = AmericaVehicleSentryDroneCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NoSound
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End
  Behavior = WeaponSetUpgrade ModuleTag_03
    TriggeredBy = Upgrade_AmericaSentryDroneGun
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE ATTACK_NEEDS_LINE_OF_SIGHT DRONE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240 ;200.0
    InitialHealth   = 240 ;200.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate        = 180
      TurretPitchRate       = 180
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = No
      RecenterTime          = 1000         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY ;SECONDARY ;[B]
      NaturalTurretAngle    = 0
      InitiallyDisabled     = No
      MinIdleScanInterval   = 250     ; in milliseconds
      MaxIdleScanInterval   = 250     ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = No ;[B]Stealthed - Mean*T* "Yes when idle, even if I am stealthed"
    PackTime = 1000
    UnpackTime = 500 ;[B]1000
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = No; [B]Yes
  End
;[B]R2
  Behavior = AIUpdateInterface ModuleTag_04b
    Turret
      TurretTurnRate = 180
      ControlledWeaponSlots = SECONDARY
    End
    ;AltTurret
    ;  TurretTurnRate = 9000;
    ;  ControlledWeaponSlots = SECONDARY
    ;End
    AutoAcquireEnemiesWhenIdle = No
  End

  Locomotor = SET_NORMAL SentryLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End
  Behavior = StealthUpdate ModuleTag_06
    StealthDelay                = 1500 ;[B]2000 ; msec
    StealthForbiddenConditions  = FIRING_PRIMARY FIRING_SECONDARY MOVING ;[B]
    HintDetectableConditions    = IS_FIRING_WEAPON 
    FriendlyOpacityMin          = 50.0%
    FriendlyOpacityMax          = 100.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;[B]
  Behavior = MaxHealthUpgrade ModuleTag_Composite
    TriggeredBy   = Upgrade_AmericaDroneArmor ;[B]Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 70
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_AmericaVehicleSentryDroneDie
    FX =  FINAL FX_AmericaVehicleTomahawkDeathExplosion
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_CratesChange
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3        ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = StealthDetectorUpdate ModuleTag_12
    DetectionRate            = 600 ;[B]900 how often to rescan for stealthed things in my sight (msec)
    DetectionRange           = 280 ;[B]225 ;Dustin, enable this for independent balancing!
  End

;[B]R2; Required to build upgrades
  Behavior = ProductionUpdate ModuleTag_13
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

;[B]R2; Switches from upgrade- to target-commandset
  Behavior = CommandSetUpgrade ModuleTag_14
    CommandSet  = AmericaVehicleSentryDroneCommandSetUpgrade
    TriggeredBy = Upgrade_AmericaSentryDroneGun
  End

  Geometry = BOX
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object CTFAmericaTankAvenger

  ; *** ART Parameters ***
  SelectPortrait         = SAAvnger_L
  ButtonImage            = SAAvnger
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaCompositeArmor

  Draw = W3DOverlordTruckDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ExtraPublicBone = TurretFX03
    ExtraPublicBone = LazerSpot01
    ExtraPublicBone = LazerSpot02
    DefaultConditionState
      Model               = AVAVNGER
      HideSubObject       = TURRET01  ;Hide controlled turret
    End
    
    ConditionState        = REALLYDAMAGED
      Model               = AVAVNGER_D
      HideSubObject       = TURRET01  ;Hide controlled turret
    End
    
    ConditionState        = RUBBLE
      Model               = AVAVNGER_D1
    End

    ;When a bombtruck disguises as an avenger, show the turret!
    ConditionState        = DISGUISED
      Model               = AVAVNGER
      ShowSubObject       = TURRET01
    End
    ConditionState        = REALLYDAMAGED DISGUISED
      Model               = AVAVNGER_D
      ShowSubObject       = TURRET01  ;Hide controlled turret
    End

    TrackMarks = EXTireTrack.tga
    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Avenger
  Side = America
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY AvengerTargetDesignator
    Weapon = SECONDARY AvengerAirLaserDummy
  End
  ArmorSet
    Conditions      = None
    Armor           = AntiAirVehicle
    DamageFX        = TankDamageFX
  End
  BuildCost       = 2200 ;1800
  BuildTime       = 22.0        ;15.0 ;[B]10 in seconds
  VisionRange     = 250		;[B]150
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue        = 100 100 200 400 ;Experience point value at each level
  ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level

  IsTrainable     = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = AmericaTankAvengerCommandSet
    
  ; *** AUDIO Parameters ***
  VoiceSelect = AvengerVoiceSelect
  VoiceMove = AvengerVoiceMove
  VoiceGuard = AvengerVoiceMove
  VoiceAttack = AvengerVoicePaint
  VoiceAttackAir = AvengerVoiceAttack
  SoundMoveStart = HumveeMoveStart
  SoundMoveStartDamaged = HumveeMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = AvengerVoiceCreate
    TurretMoveLoop = NoSound
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = NoSound
    VoiceEnter = AvengerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 450 ;300.0
    InitialHealth   = 450 ;300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL AvengerLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  
  ; Turret fly off death
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
;    ModifierBonusPerOverkillPercent = 30%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 500
    DestructionDelayVariance = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_AvengerTankDeathEffect
  End
  
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_AvengerTankDeathEffect
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_Laser_One
    WeaponTemplate        = AvengerPointDefenseLaserOne
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    ScanRate              = 50		;[B]0
    ScanRange             = 200.0
    PredictTargetVelocityFactor = 1.0
  End

  Behavior = PointDefenseLaserUpdate ModuleTag_Laser_Two ;[B]Re-enabled, shorter rate
    WeaponTemplate        = AvengerPointDefenseLaserTwo
    PrimaryTargetTypes    = BALLISTIC_MISSILE SMALL_MISSILE
    ScanRate              = 100	;0.96 = 66; 33 [B]100
    ScanRange             = 200.0
    PredictTargetVelocityFactor = 1.0
  End

  Behavior = OverlordContain ModuleTag_OverlordContain
    Slots                 = 1
    DamagePercentToUnits  = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PayloadTemplateName     = AmericaTankAvengerLaserTurret
    ExperienceSinkForRider = Yes ; I get the Exp for things my turret friend kills
  End

  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_09
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End 
  Behavior = ObjectCreationUpgrade ModuleTag_19
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End

  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_11
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FXListDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = DestroyDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_16
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = EjectPilotDie ModuleTag_17
    DeathTypes = ALL -CRUSHED -SPLATTED
    ExemptStatus = HIJACKED
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
  End

  Behavior = FlammableUpdate ModuleTag_22
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End














;------------------------------------------------------------------------------
Object CTFAmericaTankMicrowave

  ; *** ART Parameters ***
  SelectPortrait         = SAThunderBolt2_L ;[B]Bored of the old one already :)
  ButtonImage            = SAThunderBolt2
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_AmericaCompositeArmor
  
  Draw = W3DTankDraw ModuleTag_01

    ExtraPublicBone = WEAPON02 
    OkToChangeModelColor = Yes

    ConditionState  = NONE
      Model         = AVTHUNDRBLT
      ParticleSysBone = PROJECTORGLOW09 MicrowaveLenzflare 
      ParticleSysBone = NONE MicrowaveRotisserie
    End
    ConditionState  = USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C
      Model         = AVTHUNDRBLT
    End
    ConditionState  = REALLYDAMAGED RUBBLE
      Model         = AVTHUNDRBLT_D
      ParticleSysBone = PROJECTORGLOW09 MicrowaveLenzflare 
      ParticleSysBone = NONE MicrowaveRotisserie
    End
    ConditionState  = REALLYDAMAGED RUBBLE USING_WEAPON_A USING_WEAPON_B USING_WEAPON_C
      Model         = AVTHUNDRBLT_D
    End
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Microwave
  Side                   = America
  EditorSorting          = VEHICLE
  TransportSlotCount     = 3
  ArmorSet
    Conditions           = None
    Armor                = MicrowaveTankArmor ;[B]+ resistant to shells and fire, - to gatt and poison
    DamageFX             = TankDamageFX
  End

  WeaponSet
    Conditions          = None 
  ; Weapon              = PRIMARY   MicrowaveTankVehicleDisabler
    Weapon              = PRIMARY MicrowaveTankBuildingDisabler  ;SECONDARY MicrowaveTankBuildingDisabler
    Weapon              = SECONDARY MicrowaveTankBuildingClearer ;TERTIARY  MicrowaveTankBuildingClearer
  End

  BuildCost              = 1300 ;800
  BuildTime              = 15.0          ;10; in seconds    
  VisionRange            = 200
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFAmericaStrategyCenter
  End
  ExperienceValue        = 100 100 200 400 ;Experience point value at each level
  ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable            = Yes  ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = AmericaTankMicrowaveCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = MicrowaveTankVoiceSelect
  VoiceMove             = MicrowaveTankVoiceMove
  VoiceGuard            = MicrowaveTankVoiceMove
  VoiceAttack           = MicrowaveTankVoiceAttack
  SoundMoveStart        = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = MicrowaveTankVoiceCreate
    VoiceEnter             = MicrowaveTankVoiceMove
    SoundEject          = PilotSoundEject
    VoiceEject          = PilotVoiceEject
    VoiceCrush          = MicrowaveTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE
  
  Body                   = ActiveBody ModuleTag_02
    MaxHealth       = 620 ;480
    InitialHealth   = 620 ;480

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 960
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor            = SET_NORMAL CrusaderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass                 = 50.0
  End

  ; Turret fly off death
  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier  = 50
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_MicrowaveTankDeath
    FX  = FINAL    FX_GenericTankDeathExplosion
  End

  Behavior                 = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_MicrowaveTankDeath_CrushEffect
  End

  Behavior                    = CreateCrateDie ModuleTag_CratesChange
   CrateData             = SalvageCrateData
   ;CrateData             = EliteTankCrateData
   ;CrateData             = HeroicTankCrateData
  End

  Behavior = EjectPilotDie ModuleTag_17
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
    ExemptStatus = HIJACKED
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
  End

  Behavior = MaxHealthUpgrade ModuleTag_18
    TriggeredBy   = Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 100.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End
  Behavior = ExperienceScalarUpgrade ModuleTag_Upgrade01
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Upgrade02
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Upgrade03
    UpgradeObject = OCL_AmericanStealthScoutDrone ;[B]OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_Upgrade04
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End
  Behavior = ProductionUpdate ModuleTag_Prod01
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FireWeaponUpdate ModuleTag_22
    Weapon = MicrowaveTankEmitterWeapon
    ExclusiveWeaponDelay = 1000 ; If we fire a real weapon, we turn this module off for this long
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_24 ; allows use of command button hunt script with this unit. 
  End

  Geometry               = BOX
  GeometryMajorRadius    = 15.0
  GeometryMinorRadius    = 10.0
  GeometryHeight         = 10.0     
  GeometryIsSmall        = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


;------------------------------------------------------------------------------
Object CTFChinaTankBattleMaster

  ; *** ART Parameters ***
  SelectPortrait         = SB_BattleMaster ;SNNukeBtleMstr_L
  ButtonImage            = SB_BattleMaster ;SNBattlemaster
  UpgradeCameo1 = Upgrade_ChinaNukeBattleMaster
  UpgradeCameo2 = Upgrade_Nationalism
  UpgradeCameo3 = Tank_Upgrade_ChinaTankAutoLoader	;[B]
  UpgradeCameo4 = Upgrade_ChinaIsotopeStability
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model               = NVBtMstrNG
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
    End
    ConditionState = REALLYDAMAGED
      Model               = NVBtMstrNG_D
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone    = PRIMARY Muzzle
    End
    ConditionState = RUBBLE
      Model               = NVBtMstrNG_D
      Turret              = Turret01
    End

    TrackMarks              = EXTnkTrack.tga
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BattleMaster
  Side             = China
  EditorSorting    = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY BattleMasterTankGun
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY Nuke_BattleMasterTankGun
  End
  ArmorSet
    Conditions      = None
    Armor           = SpecialTankArmor ;[B]TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 950 ;800
  BuildTime       = 12.0  
  VisionRange     = 200 ;[B]150
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue = 100 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet       = ChinaVehicleBattleMasterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleMasterTankVoiceSelect
  VoiceMove = BattleMasterTankVoiceMove
  VoiceGuard = BattleMasterTankVoiceMove
  VoiceAttack = BattleMasterTankVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleMasterTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceCrush = BattleMasterTankVoiceCrush
    VoiceEnter = BattleMasterTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE

  Behavior = VeterancyGainCreate ModuleVet_01
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_AttackOutpost
  End

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 390.0 ;[B]400.0
    InitialHealth   = 390.0 ;[B]400.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 800
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120   ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL BattleMasterLocomotor
  Locomotor = SET_NORMAL_UPGRADED Nuke_FusionBattleMasterLocomotor

  Behavior = LocomotorSetUpgrade ModuleTag_04
    TriggeredBy = Upgrade_ChinaNukeBattleMaster
  End

  Behavior = HordeUpdate ModuleTag_05
    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000     ; how often to recheck horde status (msec)
    Radius = 150          ;[B]R21=110 ;75 how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = VEHICLE      ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes      ; do we only count allies towards horde status? 
    ExactMatch = Yes      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5             ; how many units must be within Radius to grant us horde-ness
    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
  End

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 40.0
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_07
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = No                        ;[B] Starts active but removes when they upgrade to Fusion Reactors
    TriggeredBy   = Upgrade_ChinaNukeBattleMaster
    ConflictsWith = Upgrade_ChinaIsotopeStability
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankBattleMasterDebris
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = WeaponSetUpgrade ModuleTag_14	;[B]
    TriggeredBy = Upgrade_ChinaNukeBattleMaster
  End

  Behavior = WeaponBonusUpgrade ModuleTag_17	;[B] aka OMFG!!!
    TriggeredBy = Tank_Upgrade_ChinaTankAutoLoader
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10     
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


;------------------------------------------------------------------------------
Object CTFChinaTankOverlord

  ; *** ART Parameters ***
  SelectPortrait         = SNOverlord_L
  ButtonImage            = SNOverlord
  
  UpgradeCameo1 = Upgrade_ChinaNukeBattleMaster
  UpgradeCameo2 = Upgrade_ChinaOverlordBattleBunker
  UpgradeCameo3 = Upgrade_ChinaOverlordGattlingCannon
  UpgradeCameo4 = Upgrade_ChinaOverlordPropagandaTower
  UpgradeCameo5 = Upgrade_ChinaIsotopeStability
 
  Draw = W3DOverlordTankDraw ModuleTag_01
    ConditionState        = NONE
      Model               = NVOvrlrd
      Animation           = NVOvrlrd.NVOvrlrd
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVOvrlrd_d
      Animation           = NVOvrlrd_d.NVOvrlrd_d
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState        = RUBBLE
      Model               = NVOvrlrd_d
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    TrackMarks           = EXTnkTrack.tga
    OkToChangeModelColor = Yes
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Overlord
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY OverlordTankGun ;[B]Nuke_OverlordTankGun
    Weapon            = SECONDARY GattlingBuildingGunAirDummy ;Dummy weapon that allows manual targeting of air units outside range ;[B]Added in R2 to allow air targeting with bunker
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY OverlordTankGun ;[B]Nuke_OverlordTankGun
    Weapon            = SECONDARY GattlingBuildingGunAirDummy ;Dummy weapon that allows manual targeting of air units outside range
  End
  ArmorSet
    Conditions        = None
    Armor             = SpecialTankArmor	;[B]TankArmor
    DamageFX          = TankDamageFX
  End
  BuildCost       = 1900	;[B]2000
  BuildTime       = 25.0        ;[B]22 in seconds    
  VisionRange     = 150
  ShroudClearingRange = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFChinaPropagandaCenter
    Object = CTFFlagSilver ;###CTF
  End

  ExperienceValue = 200 200 400 600   ;Experience point value at each level
  ExperienceRequired = 0 400 600 1200  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 3  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTankOverlordDefaultCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = OverlordTankVoiceSelect
  SoundMoveStart = OverlordTankMoveStart
  SoundMoveStartDamaged = OverlordTankMoveStart
  VoiceMove = OverlordTankVoiceMove
  VoiceGuard = OverlordTankVoiceMove
  VoiceAttack = OverlordTankVoiceAttack

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = OverlordTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = OverlordTankTurretMoveLoop
    VoiceCrush = OverlordTankVoiceCrush
    VoiceEnter = OverlordTankVoiceMove
    VoiceUnload     = OverlordTankVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE HUGE_VEHICLE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1100.0
    InitialHealth   = 1100.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 60 ;30 ;15   // turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

; [B]
  Locomotor = SET_NORMAL OverlordLocomotor
  Locomotor = SET_NORMAL_UPGRADED Nuke_FusionOverlordLocomotor

  Behavior = LocomotorSetUpgrade ModuleTag_LocomotorUpgrade
    TriggeredBy = Upgrade_ChinaNukeBattleMaster
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_04
    DeathWeapon   = Nuke_NuclearTankDeathWeapon
    StartsActive  = Yes                        ; Removes itself when player upgrades to Fusion Reactors
    ConflictsWith   = Upgrade_ChinaIsotopeStability
  End

  Behavior = OverlordContain ModuleTag_06 ; Like Transport, but when full, passes transport queries along to first passenger (redirects like tunnel) 
    Slots                 = 1
    DamagePercentToUnits        = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret = Yes ; My passengers ride in my turret, that's where the Firepoint bones are
    ExperienceSinkForRider = Yes ; I get the Exp for things my turret friend kills
  End

  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_OverlordGattlingCannon
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgrade01
    TriggeredBy = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_OverlordPropagandaTower
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordBattleBunker	;[B]
  End
  Behavior = ObjectCreationUpgrade ModuleTag_09
    UpgradeObject = OCL_OverlordBattleBunker
    TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower
  End
  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End
  Behavior = CommandSetUpgrade ModuleTag_11
    CommandSet = ChinaTankOverlordGattlingCannonCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordGattlingCannon
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = CommandSetUpgrade ModuleTag_12
    CommandSet = ChinaTankOverlordPropagandaTowerCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ConflictsWith = Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = CommandSetUpgrade ModuleTag_13
    CommandSet = ChinaTankOverlordBattleBunkerCommandSet
    TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ConflictsWith = Upgrade_ChinaOverlordPropagandaTower
  End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 50.0
  End



  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankOverlordDebris
    FX  = FINAL    FX_OverlordExplosionOneFinal
  End
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 26.0
  GeometryMinorRadius = 13.0
  GeometryHeight = 15.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;China Dragon Tank
Object CTFChinaTankDragon

  ; *** ART Parameters ***
  SelectPortrait         = SNDragonTank_L
  ButtonImage            = SNDragonTank
  
  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NVDragon
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = REALLYDAMAGED
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = RUBBLE
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Dragon
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DragonTankFlameWeapon
    Weapon = SECONDARY DragonTankFireWallWeapon
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY DragonTankFlameWeaponUpgraded
    Weapon = SECONDARY DragonTankFireWallWeaponUpgraded
    AutoChooseSources = SECONDARY NONE
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = DragonTankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1600 ;800
  BuildTime       = 16.0 ;8.0    ;[B]10.0 in seconds    
  VisionRange     = 100
  ShroudClearingRange = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaTankDragonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = DragonTankVoiceSelect
  VoiceMove = DragonTankVoiceMove
  VoiceGuard = DragonTankVoiceMove
  VoiceAttack = DragonTankVoiceAttack
  SoundMoveStart = DragonTankMoveStart
  SoundMoveStartDamaged = DragonTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = DragonTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = DragonTankVoiceMove
    VoiceFlameLocation = DragonTankVoiceFireStorm
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 370.0 ;280.0
    InitialHealth   = 370.0 ;280.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 560
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120
      TurretPitchRate = 120
      AllowsPitch = Yes
      MinPhysicalPitch = -15

      TurretFireAngleSweep = PRIMARY 10
      TurretFireAngleSweep = SECONDARY 60
      TurretSweepSpeedModifier = PRIMARY 0.5    ; Sweep slower than you turn (aim for 30 for art)
      TurretSweepSpeedModifier = SECONDARY 2.0  ; Sweep faster than you turn
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL DragonLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End


  Behavior = WeaponSetUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End


  ; just explode death
  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
;    ProbabilityModifier = 33
    DestructionDelay = 500
    DestructionDelayVariance = 500
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = FINAL    OCL_DragonDebris
    FX  = FINAL    FX_DragonTankDeathExplosionFinal
  End
  
  ; Catch fire, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 33
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_CrusaderCatchFire
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_GenericTankDeathExplosion 
;  End

  ; Napalm spills out, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 34
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_DragonNapalmSpill
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_DragonTankDeathExplosionFinal
;  End

  ; Turret fly off death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 25
;    DestructionDelay = 500
;    DestructionDelayVariance = 100
;    FX  = INITIAL  FX_GenericTankDeathEffect
;    OCL = MIDPOINT OCL_DragonDebris
;    FX  = FINAL    FX_GenericTankDeathExplosionFinal
;  End


  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
;   ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedParticleSystem2 = Bone:Smoke RandomBone:Yes Psys:DragonTransitionFire
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_DragonDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 11.0   ; Height set to allow clear clipping of projectile stream  
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


;[B] Normal, 8 redguard troopcrawler
;------------------------------------------------------------------------------
Object CTFChinaVehicleTroopCrawler

  ; *** ART Parameters ***
  SelectPortrait         = SNTransport_L
  ButtonImage            = SNTransport
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging	;[B] Nice having ;)
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = NVTCrawler
      ;note, the IRSonar particle system is added in StealthDetectorUpdate.cpp, not here
    End
    ConditionState       = REALLYDAMAGED RUBBLE ; THIS IS VERY IMPORTANT... DO NOT REMOVE 'RUBBLE' 
                                                ; @todo find out why a non-animating model like this has such trouble matching
                                                ; reallydamaged against moving against rubble, etc.
      Model              = NVTCrawler_D
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    ; PowerslideSpray = RocketBuggyDirtPowerSlide doesn't powerslide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone     = Wheel01
    RightFrontTireBone    = Wheel08
    LeftRearTireBone      = Wheel03
    RightRearTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel02
    MidRightFrontTireBone = Wheel07
    MidLeftRearTireBone   = Wheel04
    MidRightRearTireBone  = Wheel06

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultTroopTransport
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 8                 ;Just enough to fit into a Chinook.
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     Infa_ChinaVehicleTroopCrawlerDummyWeapon
  End 
  ArmorSet
    Conditions      = None
    Armor           = AssaultCrawlerArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1600 ;1200
  BuildTime       = 40.0 ;22.0
  VisionRange     = 250      ;[B]175 ;Needs to see farther and match it's weapon range -- else troop crawlers will get slaughtered by tanks!
  ShroudClearingRange = 400
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = AssaultTroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = AssaultTroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = AssaultTroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = TroopCrawlerVoiceCrush
    VoiceUnload   = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 420 ;350	;[B]240.0
    InitialHealth   = 420 ;350	;[B]240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = StealthDetectorUpdate ModuleTag_03
    DetectionRate             = 650 ;[B]v1=900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    PingSound                 = IRPing
    LoudPingSound             = IRPingLoud
    IRParticleSysName         = IRDetectSonar
    IRBrightParticleSysName   = IRDetectSonarBright
    IRGridParticleSysName     = IRDetectGrid
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
  End

;OBSOLETE
;  Behavior = AIUpdateInterface ModuleTag_04
;    Turret
;      ControlledWeaponSlots = PRIMARY
;    End
;  End
; Dude, quit changing this.  He is NOT an AssaultTransport.  The guys don't hop out and attack.  He is a transport.
;  Behavior = AssaultTransportAIUpdate ModuleTag_NewAI
;    MembersGetHealedAtLifeRatio = 0.5
;  End
  Behavior = TransportAIUpdate ModuleTag_CorrectAI
  End

  Locomotor = SET_NORMAL TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 8; [B]6 (0.98e)
    InitialPayload        = CTFChinaInfantryRedguard 6 ;#CTF[B]R2.1=8
    ScatterNearbyOnExit   = Yes
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50% ;10%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalAssaultTroopCrawlerDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior        = PropagandaTowerBehavior ModuleTag_22
    Radius                = 100
    DelayBetweenUpdates   = 4000 ; in milliseconds
    HealPercentEachSecond = 2%   ; [B] 4 get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 4%   ; [B]5; 4 get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End





;[B]Inferno MK2
;------------------------------------------------------------------------------
Object CTFChinaVehicleInfernoCannon


  ; *** ART Parameters ***
  SelectPortrait         = SNInferno_L
  ButtonImage            = SNInferno
  
  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw                    = W3DTankDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ConditionState        = NONE
      Model               = NVInferno
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    ConditionState        = RUBBLE REALLYDAMAGED
      Model               = NVInferno_D
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:InfernoCannon
  Side               = China
  EditorSorting      = VEHICLE
  TransportSlotCount = 2                 ;[B]3 how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY InfernoCannonGun
  End
  WeaponSet
    Conditions       = PLAYER_UPGRADE 
    Weapon           = PRIMARY InfernoCannonGunUpgraded
  End
  ArmorSet
    Conditions      = None
    Armor           = SiegeTankArmor ;[B]TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost          = 1300 ;900
  BuildTime          = 15.0     ;in seconds    
  VisionRange        = 300	;[B]180
  ShroudClearingRange = 400	;[B]300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object           = CTFChinaPropagandaCenter
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaVehicleInfernoCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect       = InfernoCannonVoiceSelect
  VoiceMove         = InfernoCannonVoiceMove
  VoiceGuard        = InfernoCannonVoiceMove
  VoiceAttack       = InfernoCannonVoiceAttack
  SoundMoveStart    = InfernoCannonMoveStart
  SoundMoveStartDamaged = InfernoCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = InfernoCannonVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceCrush          = InfernoCannonVoiceCrush
    VoiceEnter         = InfernoCannonVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 160 ;120.0
    InitialHealth   = 160 ;120.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ;[B]ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 45
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End
  Locomotor = SET_NORMAL InfernoLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  ; A crushing defeat
  Behavior               = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX         = FX_CarCrush
  End
  Behavior               = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList    = OCL_CrusaderTank_CrushEffect
  End
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire  
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_InfernoCannonDeathEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior         = CreateCrateDie ModuleTag_10
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior      = WeaponSetUpgrade ModuleTag_11
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End







;[B]Neutron Cannon in Boss -------------------------------------------------------------
;Also called NukeCannon
Object CTFChinaVehicleNukeLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SSB_NeutronCannon ;[B]SNNukeCannon_L
  ButtonImage            = SB_NeutronCannon ;[B]SNNukeCannon
  
  UpgradeCameo1 = Upgrade_ChinaNeutronShells
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    RecoilSettleSpeed    = 6

    OkToChangeModelColor = Yes

    ExtraPublicBone = Turret01

    DefaultConditionState
      Model                           = NVNukeCn
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponFireFXBone                = PRIMARY Muzzle
      WeaponRecoilBone                = PRIMARY Barrel
      WeaponLaunchBone                = SECONDARY Muzzle
      WeaponMuzzleFlash               = SECONDARY MuzzleFX
      WeaponFireFXBone                = SECONDARY Muzzle
      WeaponRecoilBone                = SECONDARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVNukeCn_D1
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
      WeaponLaunchBone                = SECONDARY Muzzle
      WeaponMuzzleFlash               = SECONDARY MuzzleFX
      WeaponRecoilBone                = SECONDARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    ;***
    ConditionState    = REALLYDAMAGED MOVING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
     

    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED PACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK   ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED FIRING_A
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED RELOADING_A
    AliasConditionState = DEPLOYED MOVING

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK  ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NukeLauncher
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 10                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NukeCannonGun
;    Weapon = SECONDARY NukeCannonNeutronWeapon
;    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
;    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
;    ShareWeaponReloadTime = Yes
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY NukeCannonNeutronRadiationWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End
  
  ArmorSet
    Conditions      = None
    Armor           = SiegeTankArmor ;[B]TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 2200 ;1600
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 350
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFChinaPropagandaCenter
  End

  ExperienceValue = 50 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 400 600 1000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaVehicleNukeCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart        = NukeCannonMoveStart
  SoundMoveStartDamaged = NukeCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = NukeCannonDeploy
    Undeploy            = NukeCannonUnDeploy
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 310.0 ;240.0
    InitialHealth   = 310.0 ;240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

;[B]Not available in BOSS;  Behavior = VeterancyGainCreate ModuleTag_03
;    StartingLevel = VETERAN
;    ScienceRequired = SCIENCE_ArtilleryTraining
;  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate        = 80
      TurretPitchRate       = 80
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = Yes
      RecenterTime          = 5000         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = No
    PackTime = 3333
    UnpackTime = 3333
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL ChinaNukeCannonLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = INITIAL  OCL_RadiationFieldSmall
    OCL = MIDPOINT OCL_ChinaVehicleNukeCannonDie
    OCL = FINAL    OCL_RadiationFieldSmall
    FX  = FINAL    FX_ChinaVehicleNukeCannonDeathExplosion
  End
    
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

;[B] Actually, Neutron Radiation
  Behavior = WeaponSetUpgrade ModuleTag_12
   TriggeredBy = Upgrade_ChinaNeutronShells
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3        ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ProductionUpdate ModuleTag_14
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Geometry = BOX
  GeometryMajorRadius = 32.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 17.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End





;------------------------------------------------------------------------------
Object CTFChinaTankGattling


  ; *** ART Parameters ***
  SelectPortrait         = SNGatlingTank_L
  ButtonImage            = SNGatlingTank
  
  ;UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo1 = Upgrade_ChinaChainGuns
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw                      = W3DTankDraw ModuleTag_01
    OkToChangeModelColor    = Yes
    
    DefaultConditionState        
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
      WeaponMuzzleFlash   = PRIMARY   MuzzleFX
      WeaponFireFXBone    = PRIMARY   Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
    End

    ConditionState        = REALLYDAMAGED RUBBLE         
      Model               = NVGattTank_D
    End


    ;-----pristine attacking----------------------
    ConditionState        = ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState        = CONTINUOUS_FIRE_FAST ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End

    ;-----damaged attacking----------------------
    ConditionState  REALLYDAMAGED ATTACKING         
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End




    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:GattlingTank
  Side                      = China
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3            ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions              = None 
    Weapon                  = PRIMARY   GattlingTankGun
    PreferredAgainst        = PRIMARY   AIRCRAFT
    Weapon                  = SECONDARY GattlingTankGunAir
  End

  WeaponSet
    Conditions              = PLAYER_UPGRADE
    Weapon                  = PRIMARY   GattlingTankGunUpgraded
    PreferredAgainst        = PRIMARY   AIRCRAFT
    Weapon                  = SECONDARY GattlingTankGunAirUpgraded
  End

  ArmorSet
    Conditions    = None
    Armor         = AntiAirVehicle
    DamageFX      = TankDamageFX
  End
  BuildCost       = 1600 ;800
  BuildTime       = 20.0 ;10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 360
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 80 200 300 ;[B]1.03 adequation ;0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Tank_ChinaVehicleGattlingTankCommandSet


  ; *** AUDIO Parameters ***
  VoiceSelect     = GattlingTankVoiceSelect
  VoiceMove       = GattlingTankVoiceMove
  VoiceGuard      = GattlingTankVoiceMove
  VoiceAttack     = GattlingTankVoiceAttack
  SoundMoveStart  = GattlingTankMoveStart
  SoundMoveStartDamaged = GattlingTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = GattlingTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = GattlingTankVoiceCrush
    VoiceEnter      = GattlingTankVoiceMove
    VoiceRapidFire  = GattlingTankVoiceRapid
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 400.0 ;300.0
    InitialHealth   = 400.0 ;300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 180   // turn rate, in degrees per sec
      TurretPitchRate     = 180
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45 ; this keeps it aimed half way between land and sky
                               ; since you never know from whence cometh danger
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Locomotor       = SET_NORMAL GattlingTankLocomotor
  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

;  Behavior               = DestroyDie 
;    ;nothing
;  End
    
  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    ProbabilityModifier = 19
    DestructionDelay = 200
    DestructionDelayVariance = 100

    SinkRate = 0.5     ; in Dist/Sec

    OCL = FINAL    OCL_ChinaTankGattlingDebris
    FX  = FINAL    FX_GattlingExplosionOneFinal
  End

;[B]  Behavior = VeterancyGainCreate ModuleTag_23
;    StartingLevel = VETERAN
;  End
;

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;[B]  Behavior = WeaponBonusUpgrade ModuleTag_22
;    TriggeredBy = Upgrade_ChinaChainGuns
;  End

  Behavior = WeaponSetUpgrade ModuleTag_22
   TriggeredBy = Upgrade_ChinaChainGuns
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0

  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End


;------------------------------------------------------------------------------
Object CTFChinaTankECM
  ; *** ART Parameters ***
  SelectPortrait         = SNbanshee_L
  ButtonImage            = SNbanshee
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = WEAPONA01

    DefaultConditionState
      Model                           = NVBANSHEE
      Turret                          = TURRET01
    End
    ConditionState                    = REALLYDAMAGED
      Model                           = NVBANSHEE_D
    End
    ConditionState                    = RUBBLE
      Model                           = NVBANSHEE_D1
      Turret                          = None
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:ECMTank
  Side                      = China
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3            ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions              = None 
    Weapon                  = PRIMARY   ECMTankVehicleDisabler
  End

  ArmorSet
    Conditions    = None
    Armor         = TankArmor
    DamageFX      = TankDamageFX
  End
  BuildCost       = 1500 ;950	;[B]900
  BuildTime       = 20.0 ;10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 360
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object        = CTFChinaPropagandaCenter
  End

  ExperienceValue = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaVehicleECMTankCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect     = FrequencyJammerVoiceSelect
  VoiceMove       = FrequencyJammerVoiceMove
  VoiceGuard      = FrequencyJammerVoiceMove
  VoiceAttack     = FrequencyJammerVoiceAttack
  SoundMoveStart  = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = FrequencyJammerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = NoSound
    VoiceEnter      = FrequencyJammerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 360.0 ;300.0
    InitialHealth   = 360.0 ;300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate        = 180   // turn rate, in degrees per sec
      FiresWhileTurning     = No
      MinIdleScanInterval   = 0    ; in milliseconds
      MaxIdleScanInterval   = 0    ; in milliseconds
      RecenterTime          = 0
      MinIdleScanAngle      = 180    ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 180    ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor       = SET_NORMAL GattlingTankLocomotor
  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

;  Behavior               = DestroyDie 
;    ;nothing
;  End
    
  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    ProbabilityModifier = 19
    DestructionDelay = 200
    DestructionDelayVariance = 100

    SinkRate = 0.5     ; in Dist/Sec

    OCL = FINAL    OCL_ChinaTankECMDebris
    FX  = FINAL    FX_GattlingExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_22 ; allows use of command button hunt script with this unit. 
  End

  Behavior = FireWeaponUpdate ModuleTag_23
    Weapon = ECMTankMissileJammer
    ExclusiveWeaponDelay = 1000 ; If we fire a real weapon, we turn this module off for this long
  End
 
  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0

  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End

;[B]Attack Outpost ---------------------------------------------------------------------
Object CTFChinaVehicleListeningOutpost

  ; *** ART Parameters ***
  SelectPortrait         = NVLOutpost_L
  ButtonImage            = NVLOutpost

  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = IRFX
    
    ConditionState = NONE
      Model = NVLOUTPOST
    End

    ConditionState       = REALLYDAMAGED  
      Model              = NVLOUTPOST_D
    End

    ConditionState       = RUBBLE   
      Model              = NVLOUTPOST_D1
      HideSubObject      = TURRET01      ;Hide the dish, since an ocl makes an airborne one is slow death behavior
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    LeftFrontTireBone     = TIRE01
    RightFrontTireBone    = TIRE02
    LeftRearTireBone      = TIRE03
    RightRearTireBone     = TIRE04
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  Draw = W3DModelDraw ModuleTag_33
    OkToChangeModelColor = Yes
    
    ConditionState = NONE
      Model = NVLOUTPOST_B
      Animation = NVLOUTPOST_B.NVLOUTPOST_B
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed
    End
    ConditionState = REALLYDAMAGED
      Model = NVLOUTPOST_BD
      Animation = NVLOUTPOST_BD.NVLOUTPOST_BD
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed_ReallyDamaged
    End
    
    ConditionState = MOVING
      Model = NVLOUTPOST_A
      Animation = NVLOUTPOST_A.NVLOUTPOST_A
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving
    End
    ConditionState = REALLYDAMAGED MOVING
      Model = NVLOUTPOST_AD
      Animation = NVLOUTPOST_AD.NVLOUTPOST_AD
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving_ReallyDamaged
    End

    ConditionState = RUBBLE
      Model = NONE
    End
    AliasConditionState = RUBBLE MOVING

    ;**** PACKING AND UNPACKING MODES ***
    TransitionState     = Trans_Moving Trans_Deployed
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE
    End
    TransitionState     = Trans_Moving_ReallyDamaged Trans_Deployed_ReallyDamaged
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE
    End

    TransitionState     = Trans_Deployed Trans_Moving 
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE_BACKWARDS
    End
    TransitionState     = Trans_Deployed_ReallyDamaged Trans_Moving_ReallyDamaged 
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE_BACKWARDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultListeningOutpost
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 6    ;[8]This means, 'how many seats do I occupy in another transport.'
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     ListeningOutpostUpgradedDummyWeapon
  End 

  ArmorSet
    Conditions      = None
    Armor           = AttackOutpostArmor ;[B]TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1300 ;1000
  BuildTime       = 35.0 ;18.0
  VisionRange     = 250
  ShroudClearingRange = 500
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_AttackOutpost	;[B]
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaListeningOutpostCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ListeningOutpostVoiceSelect
  VoiceMove = ListeningOutpostVoiceMove
  VoiceGuard = ListeningOutpostVoiceMove
  VoiceAttack = ListeningOutpostVoiceAttack
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = ListeningOutpostVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = NoSound
    VoiceUnload   = NoSound ; nothing recorded
    VoiceEnter = ListeningOutpostVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE REVEALS_ENEMY_PATHS CANNOT_RETALIATE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 330.0 ;280 ;[B]350.0
    InitialHealth   = 330.0 ;280 ;[B]350.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 590
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = StealthDetectorUpdate ModuleTag_03
    DetectionRate             = 900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 300 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;    PingSound                 = IRPing
;    LoudPingSound             = IRPingLoud
;    IRParticleSysName         = IRDetectSonar
;    IRBrightParticleSysName   = IRDetectSonarBright
    IRGridParticleSysName     = IRDetectGrid
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
  End

  Behavior = TransportAIUpdate ModuleTag_99
    AutoAcquireEnemiesWhenIdle = No ; let the contained do it for themselves
  End
  Behavior = StealthUpdate ModuleTag_04
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = MOVING RIDERS_ATTACKING
    FriendlyOpacityMin          = 50.0%
    FriendlyOpacityMax          = 100.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Locomotor = SET_NORMAL ListeningOutpostLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 90.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 6		;[B]10
    InitialPayload        = CTFChinaInfantryTankHunter 3 ;[B]4
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1789
    FX  = INITIAL    FX_SupplyTruckExplosionOneFinal
    OCL = INITIAL    OCL_InitialListeningOutpostDebris
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalListeningOutpostDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_13
    Radius                = 50	 ;[B] 75
    DelayBetweenUpdates   = 5000 ; 099=6000 [B] 4000 in milliseconds
    HealPercentEachSecond = 2%   ; [B] 4% get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 3%   ;[B] 4% get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End


;[B]New Boss China Stuff
;[B]--------------------

;------------------------------------------------------------------------------
Object CTFChinaTankEmperor

  ; *** ART Parameters ***
  SelectPortrait         = SNEmpTank_L
  ButtonImage            = SNEmpTank
  
;  UpgradeCameo1 = Upgrade_ChinaUraniumShells
;  UpgradeCameo2 = Upgrade_ChinaNuclearTanks
  UpgradeCameo1 = Upgrade_ChinaEmperorGattlingCannon
  UpgradeCameo2 = Upgrade_ChinaSubliminalMessaging
; UpgradeCameo5 = Tank_Upgrade_ChinaTankAutoLoader
  
  Draw = W3DOverlordTankDraw ModuleTag_01
    ConditionState        = NONE
      Model               = NVOvrlrdT
      Animation           = NVOvrlrdT.NVOvrlrdT
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    ConditionState        = REALLYDAMAGED
      Model               = NVOvrlrdT_D
      Animation           = NVOvrlrdT_D.NVOvrlrdT_D
      AnimationMode       = LOOP
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState        = RUBBLE
      Model               = NVOvrlrdT_D1
      Turret              = Turret01
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    TrackMarks           = EXTnkTrack.tga
    OkToChangeModelColor = Yes
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Tank_Overlord
  Side                = China
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY EmperorTankGun ;[B]OverlordTankGun
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY EmperorTankGun ;[B]OverlordTankGun
    Weapon            = SECONDARY GattlingBuildingGunAirDummy ;Dummy weapon that allows manual targeting of air units outside range
                                                              ;gattling cannon upgrade has been made.
  End
  ArmorSet
    Conditions        = None
    Armor             = TankArmor
    DamageFX          = TankDamageFX
  End
  BuildCost       = 2100	  ;[B]1900
  BuildTime       = 25.0          ;[B]20 in seconds    
  VisionRange     = 200           ;[B]150
  ShroudClearingRange = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFChinaPropagandaCenter
    Science = SCIENCE_EmperorTank	;[B]
  End

  ExperienceValue = 200 200 400 600   ;Experience point value at each level
  ExperienceRequired = 0 400 800 1600 ;[B]v1=0 400 600 1200; Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 3  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 3  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Tank_ChinaTankEmperorDefaultCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = EmperorTankVoiceSelect
  SoundMoveStart = OverlordTankMoveStart
  SoundMoveStartDamaged = OverlordTankMoveStart
  VoiceMove = EmperorTankVoiceMove
  VoiceGuard = EmperorTankVoiceMove
  VoiceAttack = OverlordTankVoiceAttack

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = OverlordTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = OverlordTankTurretMoveLoop
    VoiceCrush = OverlordTankVoiceCrush
    VoiceEnter = EmperorTankVoiceMove
    VoiceUnload     = OverlordTankVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE HUGE_VEHICLE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1200 ;[B]1100
    InitialHealth   = 1200 ;[B]1100

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = VeterancyGainCreate ModuleTag_23
    StartingLevel = VETERAN
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 60 ;30 ;15   // turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL EmperorLocomotor ;[B]R22; OverlordLocomotor
;  Locomotor = SET_NORMAL_UPGRADED NuclearOverlordLocomotor

;[B]  Behavior = FireWeaponWhenDeadBehavior ModuleTag_04
;    DeathWeapon   = NuclearTankDeathWeapon
;    StartsActive  = No                        ; turned on by upgrade
;    TriggeredBy   = Upgrade_ChinaNuclearTanks
;  End

;  Behavior = LocomotorSetUpgrade ModuleTag_05
;    TriggeredBy = Upgrade_ChinaNuclearTanks
;  End

  Behavior = OverlordContain ModuleTag_06 ; Like Transport, but when full, passes transport queries along to first passenger (redirects like tunnel) 
    Slots                 = 1
    DamagePercentToUnits        = 100%
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    PassengersAllowedToFire = Yes
    PassengersInTurret = Yes ; My passengers ride in my turret, that's where the Firepoint bones are
    ExperienceSinkForRider = Yes ; I get the Exp for things my turret friend kills
  End

; Prop Tower is intrinsic.  Plus, GrantUpgradeCreates on units crash savegames if the unit is Elite.
;  Behavior = GrantUpgradeCreate ModuleTag_22
;    UpgradeToGrant           = Upgrade_ChinaOverlordPropagandaTower
;    ExemptStatus      = UNDER_CONSTRUCTION
;  End

  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_EmperorGattlingCannon
    TriggeredBy   = Upgrade_ChinaEmperorGattlingCannon   ;[B]Distinct Upgrade cost from normal one
    ;ConflictsWith = Upgrade_ChinaOverlordBattleBunker
  End
  Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgrade01
    TriggeredBy = Upgrade_ChinaEmperorGattlingCannon     ;[B]
    ;ConflictsWith = Upgrade_ChinaOverlordBattleBunker
  End

  ;Propaganda tower is an innate ability without using art or subobjects.
  ;Behavior = ObjectCreationUpgrade ModuleTag_08
  ;  UpgradeObject = OCL_EmperorPropagandaTower
  ;  TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
  ;  ConflictsWith = Upgrade_ChinaOverlordBattleBunker
  ;End

  ; Doesn't get this upgrade!
  ; Behavior = ObjectCreationUpgrade ModuleTag_09
    ; UpgradeObject = OCL_OverlordBattleBunker
    ; TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ; ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower
  ; End

  Behavior = ProductionUpdate ModuleTag_10
    ; MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
     MaxQueueEntries = 2; Propaganda model is hacked to not show up.
  End
  Behavior = CommandSetUpgrade ModuleTag_11
    CommandSet = Tank_ChinaTankOverlordGattlingCannonCommandSet
    TriggeredBy   = Upgrade_ChinaEmperorGattlingCannon   ;[B]
;    ConflictsWith = Upgrade_ChinaOverlordBattleBunker Upgrade_ChinaOverlordPropagandaTower
  End
  ;Behavior = CommandSetUpgrade ModuleTag_12
   ; CommandSet = Tank_ChinaTankOverlordPropagandaTowerCommandSet
    ;TriggeredBy   = Upgrade_ChinaOverlordPropagandaTower
    ;ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordBattleBunker
  ;End
  ; Behavior = CommandSetUpgrade ModuleTag_13
   ;  CommandSet = Tank_ChinaTankOverlordBattleBunkerCommandSet
   ;  TriggeredBy   = Upgrade_ChinaOverlordBattleBunker
    ; ConflictsWith = Upgrade_ChinaOverlordGattlingCannon Upgrade_ChinaOverlordPropagandaTower
  ; End

  Behavior = PhysicsBehavior ModuleTag_14
    Mass = 150.0     ;[B]Crush away! B)
  End

  Behavior        = PropagandaTowerBehavior ModulePropaganda_04
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 1.5% ;[B]v1=2% ;099=1% get this % of max health every second 
    PulseFX               = FX_OverlordPropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
;[B]    UpgradeRequired       = Upgrade_ChinaOverlordPropagandaTower
    UpgradedHealPercentEachSecond = 2.5% ;[B]v1=3% ;099=2% get this % of max health every second 
    UpgradedPulseFX       = FX_OverlordPropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
    AffectsSelf           = Yes ; Needs this since Tower is not seperate object for Emperor
  End

  ; Smoke for a bit then explode
;  Behavior = SlowDeathBehavior
;;    ProbabilityModifier = 25
;    DestructionDelay = 1500
;    DestructionDelayVariance = 500
;    FX  = INITIAL   FX_OverlordSmoke
;    OCL = FINAL     OCL_ChinaTankOverlordDebris
;    FX  = FINAL     FX_GenericTankDeathExplosion
;  End
  
  ; Catch fire, and explode death
;  Behavior = SlowDeathBehavior
;;    ProbabilityModifier = 25
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_CrusaderCatchFire
;    OCL = FINAL    OCL_ChinaTankOverlordDebris
;    FX  = FINAL    FX_GenericTankDeathExplosion 
;  End

  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_16
    ProbabilityModifier = 25
    DestructionDelay = 200
    DestructionDelayVariance = 100
    OCL = FINAL    OCL_ChinaTankOverlordDebris
    FX  = FINAL    FX_OverlordExplosionOneFinal
  End
  Behavior = CreateCrateDie ModuleTag_17
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_OverlordDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 26.0
  GeometryMinorRadius = 13.0
  GeometryHeight = 15.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME     
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End



;[B] This version is the advanced infantry version, with 6 MGs
;---------------------------------------------------------------
Object CTFChinaVehicleTroopCrawler2

  ; *** ART Parameters ***
  SelectPortrait         = SNAsltTroop_L
  ButtonImage            = SNAsltTroop
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging	;[B] Nice having ;)
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = NVTClrI
      ;note, the IRSonar particle system is added in StealthDetectorUpdate.cpp, not here
    End
    ConditionState       = REALLYDAMAGED RUBBLE ; THIS IS VERY IMPORTANT... DO NOT REMOVE 'RUBBLE' 
                                                ; @todo find out why a non-animating model like this has such trouble matching
                                                ; reallydamaged against moving against rubble, etc.
      Model              = NVTClrI_D
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    ; PowerslideSpray = RocketBuggyDirtPowerSlide doesn't powerslide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone     = Wheel01
    RightFrontTireBone    = Wheel08
    LeftRearTireBone      = Wheel03
    RightRearTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel02
    MidRightFrontTireBone = Wheel07
    MidLeftRearTireBone   = Wheel04
    MidRightRearTireBone  = Wheel06

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultTroopTransport
  Side = China
  EditorSorting   = VEHICLE
  TransportSlotCount = 8                 ;Just enough to fit into a Chinook.
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     Infa_ChinaVehicleTroopCrawlerDummyWeapon
  End 
;[B] Assault Crawler has normal tank armor in Boss
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 2400
  BuildTime       = 45.0 ;25.0          ;in seconds    
  VisionRange     = 250 ;[B]175         ;Needs to see farther and match it's weapon range -- else troop crawlers will get slaughtered against tanks!
  ShroudClearingRange = 400
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_Minigunner
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = AssaultTroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = AssaultTroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = AssaultTroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = TroopCrawlerVoiceCrush
    VoiceUnload   = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240
    InitialHealth   = 240

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = StealthDetectorUpdate ModuleTag_03
    DetectionRate             = 900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 250   ; Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    PingSound                 = IRPing
    LoudPingSound             = IRPingLoud
    IRParticleSysName         = IRDetectSonar
    IRBrightParticleSysName   = IRDetectSonarBright
    IRGridParticleSysName     = IRDetectGrid
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
  End

;OBSOLETE
;  Behavior = AIUpdateInterface ModuleTag_04
;    Turret
;      ControlledWeaponSlots = PRIMARY
;    End
;  End
; Dude, quit changing this.  He is NOT an AssaultTransport.  The guys don't hop out and attack.  He is a transport.
;  Behavior = AssaultTransportAIUpdate ModuleTag_NewAI
;    MembersGetHealedAtLifeRatio = 0.5
;  End
  Behavior = TransportAIUpdate ModuleTag_CorrectAI
  End

  Locomotor = SET_NORMAL AssaultCrawlerLocomotor ;[B]TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 8 ;[B]6 (0.98e)
    InitialPayload        = CTFChinaInfantryMiniGunner 6;[B]minigunner 8
    ScatterNearbyOnExit   = Yes
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50% ;10%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalAssaultTroopCrawlerDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior        = PropagandaTowerBehavior ModuleTag_22
    Radius                = 100
    DelayBetweenUpdates   = 4000 ; in milliseconds
    HealPercentEachSecond = 3%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 5%   ; [B]4 get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End



;------------------------------------------------------------------------------
Object CTFGLATankScorpion

  ; *** ART Parameters ***
  SelectPortrait         = SUScorpion_L
  ButtonImage            = SUScorpion
  
  UpgradeCameo1 = Upgrade_GLAScorpionRocket
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
 
; ------------ Normal  
    DefaultConditionState
      Model = UVLiteTank
      Turret = Turret ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ; note, order-dependent: we must hide/show Missile AFTER we hide/show MissileRack!
      ShowSubObject = Turret01
      HideSubObject = MissleRack01 MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED
      Model = UVLiteTank_d
    End
    AliasConditionState = RUBBLE
    
; ------------ With big turret  
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE ; one or two crates is a turret switch
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01   ; MissileRack misspelled in the Art
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01   ; MissileRack misspelled in the Art
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED

; ---------- With missile
    ConditionState = WEAPONSET_PLAYER_UPGRADE
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

; ---------- With missile and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

; ---------- With two missiles and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Scorpion
  Side                  = GLA
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY None
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY ScorpionMissileWeapon
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY None
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY ScorpionMissileWeapon ; No bonus at Plus One
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY ScorpionTankGunPlusOne ; No further bonus at plus two
    Weapon = SECONDARY None
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne ; No further bonus at plus two
    Weapon = SECONDARY ScorpionMissileWeaponPlusTwo
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = SpecialTankArmor	;[B]TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 700 ;600
  BuildTime       = 13.0 ;6.5
  VisionRange     = 125
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_DemoTools ;[B]
  End

  ExperienceValue = 50 50 100 150    ;[B]60 60 120 200 Experience point value at each level
  ExperienceRequired = 0 80 150 300 ;[B]100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLATankScorpionCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScorpionTankVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceAttack = ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = ScorpionTankVoiceMove

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = ScorpionTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = ScorpionTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 370.0
    InitialHealth   = 370.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 740
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 100
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ScorpionLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ScorpionTankDeathEffect 
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = WeaponSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAScorpionRocket
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE 
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.5    
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;GLA Rocket Buggy
Object CTFGLAVehicleRocketBuggy

  ; *** ART Parameters ***
  SelectPortrait         = SURocketBuggy_L
  ButtonImage            = SURocketBuggy
  
  UpgradeCameo1 = Upgrade_GLABuggyAmmo
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVRockBug
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRockBug_D
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End
    
    ConditionState = RUBBLE
      Model = UVRockBug_D
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState =   WEAPONSET_PLAYER_UPGRADE
      Model = UVRockBug
      Turret = TurretUp01
      ShowSubObject = TurretUp01 
      HideSubObject = Turret
      WeaponFireFXBone = SECONDARY WeaponB ;[B]R21;PRIMARY 
      WeaponLaunchBone = SECONDARY WeaponB
    End
    
    ConditionState =   WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVRockBug_D
      Turret = TurretUp01
      ShowSubObject = TurretUp01 
      HideSubObject = Turret
      WeaponFireFXBone = SECONDARY WeaponB ;[B]R21;PRIMARY 
      WeaponLaunchBone = SECONDARY WeaponB
    End
    
    ConditionState =   WEAPONSET_PLAYER_UPGRADE RUBBLE
      Model = UVRockBug_D
      Turret = TurretUp01
      ShowSubObject = TurretUp01 
      HideSubObject = Turret
      WeaponFireFXBone = SECONDARY WeaponB ;[B]R21;PRIMARY 
      WeaponLaunchBone = SECONDARY WeaponB
    End

    TrackMarks = EXTireTrack.tga

    Dust                        = RocketBuggyDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:RocketBuggy
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY BuggyRocketWeapon 
    Weapon = TERTIARY TerroristSuicideARealWeapon
    AutoChooseSources   = PRIMARY FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = SECONDARY BuggyRocketWeaponUpgraded ;[Bt]PRIMARY
    Weapon = TERTIARY TerroristSuicideARealWeapon
    AutoChooseSources   = SECONDARY FROM_PLAYER FROM_AI FROM_SCRIPT ;[B]PRIMARY
    AutoChooseSources = TERTIARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1300 ;900
  BuildTime       = 20.0 ;10.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFGLAPalace
  End

  ExperienceValue       = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = Demo_GLAVehicleRocketBuggyCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RocketBuggyVoiceSelect
  VoiceMove = RocketBuggyVoiceMove
  VoiceAttack = RocketBuggyVoiceAttack
  SoundMoveStart = RocketBuggyMoveStart
  SoundMoveStartDamaged = RocketBuggyMoveStart
  VoiceGuard = RocketBuggyVoiceMove


  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = RocketBuggyVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceCrush      = RocketBuggyVoiceCrush
    VoiceEnter = RocketBuggyVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 160 ;120
    InitialHealth   = 160 ;120

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 90
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = AIUpdateInterface ModuleTag_03b
;[Bt]R21
    Turret
      TurretTurnRate = 80    ; turn rate, in degrees per sec
      TurretPitchRate = 60
      FirePitch = 35  ;35 [B]70 ;Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL RocketBuggyLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

; The pop up AirDeath 
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RocketBuggyAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_09
    TriggeredBy = Upgrade_GLABuggyAmmo
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE 
  End

  Behavior = CommandSetUpgrade ModuleTag_19
    CommandSet = Demo_GLAVehicleRocketBuggyCommandSetUpgrade
    TriggeredBy = Demo_Upgrade_SuicideBomb
  End
  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End





;------------------------------------------------------------------------------
;GLA Combat Bike
Object CTFGLAVehicleCombatBike

  ; *** ART Parameters ***
  SelectPortrait         = SUComBike_L
  ButtonImage            = SUComBike_L
  
  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  UpgradeCameo4 = Upgrade_GLAJunkRepair ;[B]R2
  ;UpgradeCameo5 = NONE

  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight

      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)

    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED






    ;Terror Bike
    ;------------------------------
    ConditionState  RIDER5
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING

    ConditionState = REALLYDAMAGED RIDER5
      Model = UVComBike_d
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED RIDER5
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End
    ConditionState = TOPPLED REALLYDAMAGED RIDER5
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End



    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ;Missile Bike
    ;------------------------------
    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED
  
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End


    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Saboteur animations
    ;-----------------------
    ConditionState = RIDER7 
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerToxinGun ;[B] GLARebelBikerMachineGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY Chem_TunnelDefenderBikerRocketWeaponGamma ;DEMO_TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    Weapon = TERTIARY GLAJarmenKellPaintDemoralize
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY NONE
    PreferredAgainst = PRIMARY INFANTRY
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
;[B] Crate-upgraded Bikers are more armored than other bikers
  ArmorSet
    Conditions      = CRATE_UPGRADE_ONE
    Armor           = TruckEnhancedArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1100 ;550
  BuildTime       = 20.0 ;5.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_DemoTools	;[B]
  End

  ExperienceValue       = 30 30 60 100 ;[B]50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  ;CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = Demo_GLAVehicleCombatBikeDefaultCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER WEAPON_SALVAGER;[B]

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100
    InitialHealth   = 100

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 5 ;[B]R2; 2
    HealingDelay = 550 ;[B]R2; 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_09
    TriggeredBy = Upgrade_GLABuggyAmmo
  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
    Rider1 = GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider2 = CTFGLAInfantryRebel          RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider3 = CTFGLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider4 = CTFGLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
    Rider5 = CTFGLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
    Rider6 = CTFGLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider7 = CTFGLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    ScuttleDelay          = 1500
    ScuttleStatus         = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 1
    InitialPayload        = CTFGLAInfantryTerrorist 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;Kris: The slowdeath's above handle this case. This was causing a 50% chance 
;      of the bike lingering after the terrorist bike suicided.
;  Behavior = SlowDeathBehavior ModuleTag_Death_22
;    DeathTypes          = NONE +SUICIDED +EXPLODED
;    SinkDelay           = 3000
;    SinkRate            = 0.5     ; in Dist/Sec
;    DestructionDelay    = 8000
;    FX                  = INITIAL FX_TerroristExplode
;    FlingForce          = 8
;    FlingForceVariance  = 3
;    FlingPitch          = 60
;    FlingPitchVariance  = 10
;  End

;[B]Normal (non-terrorist) with suicide upgrade

  ;Non-terrorist with suicide bomb upgrade (fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath16
    ExemptStatus  = STATUS_RIDER5
    DeathWeapon   = Demo_SuicideDynamitePackPlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes = ALL -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
  End;

  ;Non-terrorist with suicide bomb upgrade (no fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath17
    ExemptStatus  = STATUS_RIDER5
    DeathWeapon   = Demo_SuicideDynamitePack
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes = NONE +SUICIDED
  End;

; Terrorist bike weapons
;=========================

  ;Terrorist without suicide bomb upgrade (fire only)
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb                                        ;700
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
    ConflictsWith = Demo_Upgrade_SuicideBomb Chem_Upgrade_GLAAnthraxGamma ;[B]
  End

  ;Terrorist with suicide bomb upgrade (no fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath19
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = Demo_TerroristOnCombatBikeSuicideDynamitePack           ;750 ;850
    StartsActive   = No
    TriggeredBy    = Demo_Upgrade_SuicideBomb
    ConflictsWith  = Chem_Upgrade_GLAAnthraxGamma ;[B]
    RequiresAllTriggers = Yes; 
    DeathTypes     = ALL -SUICIDED ;[B]R2 fix
  End;

  ;Terrorist with suicide bomb upgrade (fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath20
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = Demo_TerroristOnCombatBikeSuicideDynamitePackPlusFire   ;900 ;1000
    StartsActive   = No
    TriggeredBy    = Demo_Upgrade_SuicideBomb
    ConflictsWith  = Chem_Upgrade_GLAAnthraxGamma ;[B]
    RequiresAllTriggers = Yes; 
    DeathTypes     = NONE +SUICIDED ;[B]R2; +SUICIDED means it successfully hit a target
  End;

;[B] Boss special Gamma weapon ;[B]R2.2; 'Dead Man's Trigger' no longer on gamma

  ;Terrorist with GAMMA upgrade (fire only)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath21
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = Gamma_TerroristOnCombatBikeSuicideDynamitePack           ;800
    StartsActive   = No
    TriggeredBy    = Chem_Upgrade_GLAAnthraxGamma
    ConflictsWith  = Demo_Upgrade_SuicideBomb     ;[B]
    RequiresAllTriggers = Yes;
    DeathTypes     = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End;

;[B] Boss special Demo-Gamma weapon

  ;Terrorist with GAMMA and Demo upgrade (no fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagDeath23
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = DemoGamma_TerroristOnCombatBikeSuicideDynamitePack           ;1000
    StartsActive   = No
    TriggeredBy    = Chem_Upgrade_GLAAnthraxGamma Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes     = ALL -SUICIDED ;[B]R2 fix
  End;

  ;  ProjectileDetonationOCL = OCL_PoisonFieldGammaSmall
  ;Terrorist with GAMMA and Demo upgrade (fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTagGammaDeath24
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = DemoGamma_TerroristOnCombatBikeSuicideDynamitePackPlusFire   ;1100 ;1200
    StartsActive   = No
    TriggeredBy    = Chem_Upgrade_GLAAnthraxGamma Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes;
    DeathTypes     = NONE +SUICIDED ;[B]R2 fix
  End;


  Behavior = CommandSetUpgrade ModuleTag_23
    CommandSet = Demo_GLAVehicleCombatBikeDefaultCommandSetUpgrade
    TriggeredBy = Demo_Upgrade_SuicideBomb
  End


  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;GLA Combat Bike with Tunnel Defender
Object CTFGLAVehicleCombatBikeRocket

  ; *** ART Parameters ***
  SelectPortrait         = SUComBike_L
  ButtonImage            = SUComBike
  
  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  UpgradeCameo4 = Upgrade_GLAJunkRepair ;[B]R2

  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER5
    AliasConditionState RIDER5 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER5 REALLYDAMAGED
    AliasConditionState RIDER5 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER5 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED


    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ;Missile Bike
    ;------------------------------
    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED
  
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End


    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Saboteur animations
    ;-----------------------
    ConditionState = RIDER7 
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerToxinGun ;[B] GLARebelBikerMachineGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
;  ArmorSet
;    Conditions      = None
;    Armor           = TruckArmor
;    DamageFX        = TankDamageFX
;  End

;[B] Crate-upgraded Bikers are more armored than other bikers
  ArmorSet
    Conditions      = None ;[B]RPG-bikes come crate upgraded; CRATE_UPGRADE_ONE
    Armor           = TruckEnhancedArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 500
  BuildTime       = 8.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFGLAPalace
  End

  ExperienceValue       = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  ;CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  ;CommandSet            = GLAVehicleCombatBikeCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove


  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = RocketBuggyVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100
    InitialHealth   = 100

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL ArmoredCombatBikeGroundLocomotor CombatBikeCliffLocomotor ;[B]special ver
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

;[B]EA never really got this working..
;  Behavior = WeaponSetUpgrade ModuleTag_09
;    TriggeredBy = Upgrade_GLABuggyAmmo
;  End

  Behavior = WeaponBonusUpgrade ModuleTag_09	;[B] Toxin Reloader
    TriggeredBy = Upgrade_GLAToxinShells;
  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
    Rider1 = GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider2 = GLAInfantryRebel          RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider3 = GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider4 = GLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
    Rider5 = GLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
    Rider6 = GLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider7 = GLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    ScuttleDelay          = 1500
    ScuttleStatus         = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 1
    InitialPayload        = CTFGLAInfantryTunnelDefender 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 50%  ; [B]100%; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    DoorOpenTime = 0
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End

  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;GLA Combat Bike with Terrorist
Object CTFGLAVehicleCombatBikeTerrorist

  ; *** ART Parameters ***
  SelectPortrait         = SUComBike_L
  ButtonImage            = SUComBike
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Demo_Upgrade_SuicideBomb ;[B]
  UpgradeCameo3 = Upgrade_GLAToxinShells ;NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER5
    AliasConditionState RIDER5 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER5 REALLYDAMAGED
    AliasConditionState RIDER5 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER5 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_d
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED


    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ;Missile Bike
    ;------------------------------
    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED
  
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_d
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End


    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITRST_SKN
      Animation           = UITRST_SKL.UITER_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Saboteur animations
    ;-----------------------
    ConditionState = RIDER7 
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerMachineGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
;[B] Crate-upgraded Bikers are more armored than other bikers
  ArmorSet
    Conditions      = CRATE_UPGRADE_ONE
    Armor           = TruckEnhancedArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 500
  BuildTime       = 8.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
;  Remove - JMC 8/6/03 - This is not usable by the player but I can use it for any AI if the prereqs are gone.
;  Prerequisites
;    Object = GLAArmsDealer
;    Object = GLAPalace
;  End
  EnergyProduction = -1	;[B]Doesn't turn off though

  ExperienceValue       = 30 30 60 100 ;[B]50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  ;CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  ;CommandSet            = GLAVehicleCombatBikeCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove


  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = RocketBuggyVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER WEAPON_SALVAGER;[B]

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100
    InitialHealth   = 100

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_09
    TriggeredBy = Upgrade_GLABuggyAmmo
  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
    Rider1 = GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider2 = GLAInfantryRebel          RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider3 = GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider4 = GLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
    Rider5 = GLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
    Rider6 = GLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider7 = GLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    ScuttleDelay          = 1500
    ScuttleStatus         = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 1
    InitialPayload        = CTFGLAInfantryTerrorist 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    DoorOpenTime = 0
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End

  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End



;------------------------------------------------------------------------------
Object CTFGLAVehicleQuadCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUQuadCannon_L
  ButtonImage            = SUQuadCannon
  
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  ;UpgradeCameo4 = XXX
  ;UpgradeCameo5 = XXX
  
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = UVQuadCann
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
    End
      
    ConditionState = REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End
    
    ConditionState = RUBBLE
      Model = UVQuadCann_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model = UVQuadCann
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadCann
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE
      Model = UVQuadCann_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
 
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This unit doesn't powerslide.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:QuadCannon
  Side = GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY QuadCannonGunAir
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY QuadCannonGunUpgradeOne
    Weapon = SECONDARY QuadCannonGunUpgradeOneAir
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY QuadCannonGunUpgradeTwo
    Weapon = SECONDARY QuadCannonGunUpgradeTwoAir
    Weapon = TERTIARY TerroristSuicideARealWeapon	;[B]
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = HumveeArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1400 ;700
  BuildTime       = 30.0 ;7.5          ;099 = 7 [B]6.0 in seconds
  VisionRange     = 150
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  CommandSet          = Demo_GLAVehicleQuadCannon

  ExperienceValue = 60 60 120 180 ;[B]50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = QuadCannonVoiceSelect
  VoiceMove             = QuadCannonVoiceMove
  VoiceAttack           = QuadCannonVoiceAttack
  VoiceAttackAir        = QuadCannonVoiceAttackAir
  SoundMoveStart        = QuadCannonMoveStart
  SoundMoveStartDamaged = QuadCannonMoveStart
  VoiceGuard             = QuadCannonVoiceMove
  UnitSpecificSounds
   ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = QuadCannonVoiceCreate
   TurretMoveStart      = NoSound
   TurretMoveLoop       = TurretMoveLoop
   ; Required for the W3DTruckDraw module
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
   VoiceSalvage         = QuadCannonVoiceSalvage
   VoiceCrush           = QuadCannonVoiceCrush
   VoiceEnter             = QuadCannonVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 450.0 ;300.0
    InitialHealth   = 450.0 ;300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End
  
  Locomotor = SET_NORMAL QuadCannonLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End
  
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 411
    DestructionDelay = 150
    DestructionDelayVariance = 250
    OCL = FINAL    OCL_QuadCannonDeathEffect  
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End
  
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End


  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = WeaponBonusUpgrade ModuleTag_12
    TriggeredBy = Upgrade_GLAAPBullets
  End 

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE 
  End

  Behavior = CommandSetUpgrade ModuleTag_16
    CommandSet = Demo_GLAVehicleQuadCannonUpgrade
    TriggeredBy = Demo_Upgrade_SuicideBomb
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;Also called Toxin Tractor && ToxinTractor
Object CTFGLAVehicleToxinTruck

  ; *** ART Parameters ***
  SelectPortrait         = SSB_BetaToxinTractor ;[B]SUToxinTractor_L
  ButtonImage            = SSB_BetaToxinTractor ;[B]SUToxinTractor

  UpgradeCameo1 = Chem_Upgrade_GLAAnthraxGamma  
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  ;UpgradeCameo3 = Demo_Upgrade_SuicideBomb
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState 
      Model = UVToxinTrk
      Turret = Turret
      TurretPitch = TurretEL
      ShowSubObject = Turret
      HideSubObject = TurretUP01 TurretUP02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY Spigot
      WeaponLaunchBone = SECONDARY Spigot
      WeaponFireFXBone = TERTIARY WeaponA ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponA
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE

    ConditionState = USING_WEAPON_B 
      Model = UVToxinTrk
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE
      Model = UVToxinTrk
      ParticleSysBone = none AnthraxPuddleContinuous
    END

    ConditionState = REALLYDAMAGED
      Model = UVToxinTrk_D
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
    AliasConditionState RUBBLE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE

    ConditionState = USING_WEAPON_B REALLYDAMAGED
      Model = UVToxinTrk_D
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE 
      Model = UVToxinTrk_D
      ParticleSysBone = none AnthraxPuddleContinuous
    END

; -------------- Turret change #1
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    END

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE 
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = TERTIARY WeaponB ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    END

; -------------- Turret change #2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    END

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    END
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO 
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponFireFXBone = TERTIARY WeaponC ;[B]R21
      WeaponLaunchBone = TERTIARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    END

    TrackMarks = EXTireTrack.tga
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This vehicle doesn't powerslide.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ToxinTruck
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY     ToxinTruckGunUpgraded
    Weapon            = SECONDARY   ToxinTruckSprayerUpgraded
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower	;[B]
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGamma
    Weapon            = SECONDARY   Chem_ToxinTruckSprayerGamma
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower	;[B]
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End

  WeaponSet 
    Conditions        = CRATEUPGRADE_ONE 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusOne
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusOne
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower	;[B]
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE

  End

  WeaponSet
    Conditions        = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGammaPlusOne ;[B]
    Weapon            = SECONDARY   Chem_ToxinTruckSprayerGammaPlusOne ;[B]
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower	;[B]
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End

  WeaponSet 
    Conditions        = CRATEUPGRADE_TWO 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusTwo ;[B]
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusTwo ;[B]
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower      ;[B]
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End

  WeaponSet
    Conditions        = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon            = PRIMARY     Chem_ToxinTruckGunGammaPlusTwo     ;[B]
    Weapon            = SECONDARY   Chem_ToxinTruckSprayerGammaPlusTwo ;[B]
    Weapon 	      = TERTIARY    ToxinTractorBlobThrower            ;[B]
    AutoChooseSources = SECONDARY   NONE ;Special attack only
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY NONE
  End

  ArmorSet
    Conditions        = None
    Armor             = ToxinTruckArmor
    DamageFX          = TruckDamageFX
  End
  BuildCost           = 1800 ;600
  BuildTime           = 16.0 ;4.0  ;[B]R2=5.0 in seconds    
  VisionRange         = 100
  ShroudClearingRange = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End

  ExperienceValue     = 30 30 60 100 ;[B]50 50 100 150    ;Experience point value at each level
  ExperienceRequired  = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = GLAVehicleToxinTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = ToxinTractorVoiceSelect
  VoiceMove           = ToxinTractorVoiceMove
  VoiceGuard          = ToxinTractorVoiceMove
  VoiceAttack         = ToxinTractorVoiceAttack
  SoundMoveStart      = ToxinTractorMoveStart
  SoundMoveStartDamaged = ToxinTractorMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = ToxinTractorVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
    VoiceCrush      = ToxinTractorVoiceCrush
    VoiceEnter           = ToxinTractorVoiceMove
    VoicePoisonLocation = ToxinTractorVoiceAttackContam

  End

  ; *** ENGINEERING Parameters ***
  RadarPriority         = UNIT
  KindOf                = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth           = 360 ;270	;[B]240
    InitialHealth       = 360 ;270.0 ;[B]240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    Turret
      TurretTurnRate            = 180
      TurretPitchRate           = 180
      AllowsPitch               = Yes
      MinPhysicalPitch          = -20 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      TurretFireAngleSweep      = PRIMARY 8
      TurretSweepSpeedModifier  = PRIMARY 0.5    ; Sweep slower than you turn
      ControlledWeaponSlots     = PRIMARY
    End
  End
  Locomotor             = SET_NORMAL ToxinTruckLocomotor
  Behavior              = PhysicsBehavior ModuleTag_04
    Mass                = 50.0
  End

  Behavior                    = SlowDeathBehavior  ModuleTag_05
    DeathTypes                = ALL -CRUSHED -SPLATTED
    ProbabilityModifier       = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay          = 0
    DestructionDelayVariance  = 200
    FX                        = INITIAL FX_ToxinTractorDie
    OCL                       = INITIAL OCL_ToxinTractorDeathEffect
    FX                        = FINAL FX_ToxinTruckExplosionOneFinal
  End
  Behavior                    = InstantDeathBehavior  ModuleTag_06
    DeathTypes                = NONE +CRUSHED +SPLATTED
    FX                        = FX_CarCrush
    OCL                       = OCL_CrusaderTank_CrushEffect
  End
    
  Behavior = CreateCrateDie ModuleTag_07
    CrateData   = SalvageCrateData
    ;CrateData  = EliteTankCrateData
    ;CrateData  = HeroicTankCrateData
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    ; the Toxin Tractor gets this upgrade if we either buy the upgrade,
    ; or if it gets HEROIC status
    TriggeredBy   = Chem_Upgrade_GLAAnthraxGamma Upgrade_Veterancy_HEROIC ;[B]Upgrade_GLAAnthraxBeta
  End
  
  Behavior                          = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1  = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1          = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = AutoHealBehavior ModuleTag_12
    HealingAmount   = 2
    HealingDelay    = 1000 ; msec
    TriggeredBy     = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration          = 5000      ; If I catch fire, I'll burn for this long...
    AflameDamageAmount      = 3         ; taking this much damage...
    AflameDamageDelay       = 500       ; this often.
  End

  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_13
    WeaponSlot            = SECONDARY
    ConflictsWith         = Chem_Upgrade_GLAAnthraxGamma Upgrade_Veterancy_HEROIC ;[B]Upgrade_GLAAnthraxBeta 
    OCL                   = OCL_PoisonFieldUpgradedMedium ;[B]OCL_PoisonFieldMedium
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End
  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_14
    WeaponSlot            = SECONDARY
    TriggeredBy           = Chem_Upgrade_GLAAnthraxGamma Upgrade_Veterancy_HEROIC ;[B]Upgrade_GLAAnthraxBeta 
    OCL                   = OCL_PoisonFieldGammaMedium ;[B]
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15    ;These two make the right damage field at death
    DeathWeapon   = ToxinShellWeaponUpgraded ;[B]
    StartsActive  = Yes   
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma ;[B]Upgrade_GLAAnthraxBeta
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = Chem_ToxinShellWeaponGamma ;[B]
    StartsActive  = No   
    TriggeredBy = Chem_Upgrade_GLAAnthraxGamma ;[B]Upgrade_GLAAnthraxBeta
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.0   ; set to make the projectile stream look right  
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End




;------------------------------------------------------------------------------
Object CTFGLAVehicleBombTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUBombTruck_L
  ButtonImage            = SUBombTruck
  
  UpgradeCameo1 = Upgrade_GLABombTruckHighExplosiveBomb
  UpgradeCameo2 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  UpgradeCameo4 = Demo_Upgrade_SuicideBomb ;[B]
  ;UpgradeCameo5 = NONE
  
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    
    DefaultConditionState
      Model = UVBMBTRUK
      Animation = UVBMBTRUK.UVBMBTRUK
      AnimationMode = LOOP

      ;Display the default bombload -- and the upgrades will handle the rest!
      HideSubObject = Bombload02 Bombload03 Bombload04
    End

    ConditionState = REALLYDAMAGED
      Model = UVBMBTRUK_D
      Animation = UVBMBTRUK_D.UVBMBTRUK_D
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVBMBTRUK_D
    End

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    MidLeftFrontTireBone = Tire03
    MidRightFrontTireBone = Tire04
    LeftRearTireBone = Tire05
    RightRearTireBone = Tire06
    TireRotationMultiplier = 0.2   ; this * speed = rotation.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BombTruck
  Side = GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 1300 ;1000        ;[B]R2.2; 1200
  BuildTime       = 35.0 ;9.0         ;[B]R2.2; 15.0         ;in seconds    
  VisionRange     = 250         ;[B]R2.2;150 ; Used in attack move targeting
  ShroudClearingRange = 300     ;[B]R2.2;200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object  = CTFGLAPalace
    Science = SCIENCE_StCamo ;[B]New for R2.2
  End

  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAVehicleBombTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BombTruckVoiceSelect
  VoiceMove = BombTruckVoiceMove
  VoiceGuard = BombTruckVoiceMove
  VoiceAttack = BombTruckVoiceAttack
  SoundMoveStart = BombTruckMoveStart
  SoundMoveStartDamaged = BombTruckMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate                   = BombTruckVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = NoSound
    DisguiseStarted               = BombTruckDisguiseStarted
    DisguiseRevealedSuccess       = BombTruckDisguiseRevealedSuccess
    DisguiseRevealedFailure       = BombTruckDisguiseRevealedFailure
    VoiceEnter = BombTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE DISGUISER CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0 ;250.0
    InitialHealth   = 300.0 ;250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 30 30 30 30 ;[B]50 50 50 50  ; Experience point value at each level
  IsTrainable = No

  ;Kris: Um, bomb trucks don't gain experience.
  ;Behavior = VeterancyGainCreate ModuleTag_03
  ;  StartingLevel = VETERAN
  ;End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End
  Locomotor = SET_NORMAL BombTruckLocomotor BombTruckCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = ProductionUpdate ModuleTag_07
    ; nothing
  End

  Behavior = SlowDeathBehavior  ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BombTruckDeathEffect
  End

  ;Behavior = DestroyDie
    ;nothing
  ;End


  ;************************************************************************************************
  ;* WHICH BOMB DO WE USE??? 
  ;* We have 2 damage possibilities -- (normal OR high explosive) 
  ;* So part 1 is inflicting the damage itself without creating effects
  ;* The complicated part is the part where we have 6 possible effect explosions based on 
  ;* all the possible upgrade combinations. Note that bio weapons don't inflict damage through
  ;* the explosion.
  ;*
  ;* DAMAGE COMBINATIONS (NO EFFECTS):
  ;* 1) Normal (doesn't have high explosive upgrade)
  ;* 2) High explosive (has high-explosive upgrade)
  ;*
  ;* [B]Uber-cool Boss version
  ;* EFFECT COMBINATIONS (NO DAMAGE):
  ;* 1) Normal (no upgrades)
  ;* 2) Anthrax Bio (bio-bomb upgrade)
  ;* 3) * Anthrax Gamma (bio-bomb and gamma upgrade)
  ;* 4) High explosive (high explosive upgrade)
  ;* 5) High explosive Anthrax bio (high explosive and bio-bomb upgrade)
  ;* 6) * High explosive Gamma (high explosive, bio-bomb, and gamma upgrades)
  ;************************************************************************************************

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 1 -- Normal explosion (can't have high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon   = BombTruckDefaultBombDamage
    StartsActive  = Yes                      ; turned on by upgrade
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 2 -- High explosion (always plays if it has high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_10
    DeathWeapon   = BombTruckHighExplosionBombDamage
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
  End

;  ;************************************************************************************************
;  ;* EXCLUSIVE EFFECT COMBINATION 1 - Regular explosion (no upgrades)
;  ;************************************************************************************************
;  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
;    DeathWeapon   = BombTruckDefaultBombEffect
;    StartsActive  = Yes                      ; turned on by upgrade
;    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
;  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 2 - Bio + explosion
  ;* Requires:    Bio upgrade
  ;* Can't have:  Gamma upgrade, high explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = BombTruckAnthraxBombEffect ;[B]BombTruckBioBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Chem_Upgrade_GLAAnthraxGamma ;[B]Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 3 - Gamma explosion only
  ;* Requires:    Bio upgrade and gamma upgrade
  ;* Can't have:  High explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    ;[B]
    DeathWeapon   = BombTruckAnthraxGammaBombEffect ;[B]BombTruckAnthraxBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma ;[B]Upgrade_GLAAnthraxBeta
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 4 - High explosion only
  ;* Requires:    High explosive upgrade
  ;* Can't have:  Bio upgrade and Gamma upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14
    DeathWeapon   = BombTruckHighExplosiveBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith = Upgrade_GLABombTruckBioBomb Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 5 - High explosive + anthrax explosion 
  ;* Requires:    High explosive upgrade and bio upgrade 
  ;* Can't have:  Gamma upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
    DeathWeapon   = BombTruckHighExplosiveAnthraxBombEffect ;[B]BombTruckHighExplosiveBioBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
    ConflictsWith = Chem_Upgrade_GLAAnthraxGamma ;[B]Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 6 - High explosive + Gamma explosion 
  ;* Requires:    High explosive, Bio, and gamma upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    ;[B]
    DeathWeapon   = BombTruckHighExplosiveGammaBombEffect ;[B] BombTruckHighExplosiveAnthraxBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb Chem_Upgrade_GLAAnthraxGamma
    RequiresAllTriggers = Yes
  End

  ;-------------------------------------------------------------------
  ; Now we get to display the payload based on upgrades!!! 
  ;-------------------------------------------------------------------
  Behavior = SubObjectsUpgrade ModuleTag_17
    ;*** Bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb 
    ConflictsWith  = Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload02 
    HideSubObjects = Bombload01 Bombload03 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_18
    ;*** High-explosive bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith  = Upgrade_GLABombTruckBioBomb 
    ShowSubObjects = Bombload03 
    HideSubObjects = Bombload01 Bombload02 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_19
    ;*** High-explosive bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload04 
    HideSubObjects = Bombload01 Bombload02 Bombload03
    RequiresAllTriggers = Yes
  End
  ;-------------------------------------------------------------------


  Behavior = SpecialAbility ModuleTag_20
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End

  Behavior = StealthUpdate ModuleTag_22
    StealthDelay                          = 1
    DisguisesAsTeam                       = Yes
    RevealDistanceFromTarget              = 100.0f
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    DisguiseFX                            = FX_BombTruckDisguise
    DisguiseRevealFX                      = FX_BombTruckDisguiseReveal
    InnateStealth                         = Yes
    DisguiseTransitionTime                = 2000
    DisguiseRevealTransitionTime          = 1000 
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior = TransitionDamageFX ModuleTag_26
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

;[B]AI enhancement
  Behavior = CommandButtonHuntUpdate BTDisguiseHunt ; nothing
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object CTFGLAVehicleScudLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SUScudLauncher_L
  ButtonImage            = SUScudLauncher

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAAnthraxBeta
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
  
    DefaultConditionState
      Model = UVScudLchr
      Turret = TURRET
      TurretPitch = TURRETEL
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = UVScudLchr_d
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVScudLchr
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVScudLchr
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:ScudLauncher
  Side = GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

;******** Beta
  WeaponSet
    Conditions = None
    Weapon = PRIMARY SCUDLauncherGunExplosive
    Weapon = SECONDARY SCUDLauncherGunAnthrax ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
  End

;******** Gamma
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY SCUDLauncherGunExplosive
    Weapon = SECONDARY Chem_SCUDLauncherGunAnthraxGamma ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

;******** Crate1 + Beta
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOne
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusOne ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

;******** Crate1 + Gamma
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOne
    Weapon = SECONDARY Chem_SCUDLauncherGunAnthraxGammaPlusOne ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

;******** Crate2 + Beta
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwo
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusTwo ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

;******** Crate2 + Gamma
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwo
    Weapon = SECONDARY Chem_SCUDLauncherGunAnthraxGammaPlusTwo ;[B]
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = SiegeTankArmor ;[B]TankArmorTruckArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1900 ;1300
  BuildTime       = 30.0 ;15.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFGLAPalace
    Science = SCIENCE_DemoTools
  End

  ExperienceValue = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = GLAVehicleScudLauncherCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudLauncherVoiceSelect
  VoiceMove = ScudLauncherVoiceMove
  VoiceGuard = ScudLauncherVoiceMove
  VoiceAttack = ScudLauncherVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate       = ScudLauncherVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush = ScudLauncherVoiceCrush
    VoiceEnter = ScudLauncherVoiceMove
    VoicePrimaryWeaponMode = ScudLauncherVoiceModeHiEx
    VoiceSecondaryWeaponMode = ScudLauncherVoiceModeAnthrax
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 230.0 ;180.0
    InitialHealth   = 230.0 ;180.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 60   ; turn rate, in degrees per sec
      TurretPitchRate = 60
      FirePitch = 90  ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End  

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL ScudLauncherLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_SCUDLauncherDeathEffect  
    FX  = FINAL    FX_ScudLauncherExplosionOneFinal
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = WeaponSetUpgrade ModuleTag_23
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End

  Behavior = LockWeaponCreate ModuleTag_24
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE 
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length 

End





;------------------------------------------------------------------------------
; this unit is never really "built"; building one triggers the random building of
; one of the other chassis. If you want a *specific* chassis, choose it explicitly;
; if you want a chassis at random, specify this.
Object CTFGLAVehicleTechnical

  ; *** ART Parameters ***
  SelectPortrait         = SUTechnical_L 
  ButtonImage            = SUTechnical

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      ; give it a model so it'll show up in WB
      Model = UVTechTrck
    End
  End

  ; set cost and time fields here or else they won't work
  BuildCost       = 1100 ;550
  BuildTime       = 20.0 ;5.0

; Needed to get the Veterancy Overlays on top of the Technical with his build variations.
;------------------------------------------------------------
;[B]New for R2.1
  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_StCamo
  End

  Side = GLA
  EditorSorting = VEHICLE
  BuildVariations = GLAVehicleTechnicalChassisOne GLAVehicleTechnicalChassisTwo GLAVehicleTechnicalChassisThree

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE TRANSPORT

End


;------------------------------------------------------------------------------
;The Marauder Tank, for the Warlord General.  
Object CTFGLATankMarauder

  ; *** ART Parameters ***
  SelectPortrait         = SUMarauder_L
  ButtonImage            = SUMarauder
  
  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Chem_Upgrade_GLAAnthraxGamma
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  UpgradeCameo4 = Upgrade_GLAJunkRepair  
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

; no crate upgrade
    ConditionState = NONE
      Model = UVMarauder
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01 ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED
      Model = UVMarauder_d
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE
      Model = UVMarauder_d
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

; crate upgrade 1
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder_d
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder_d
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

; crate upgrade 2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder_d
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder_d
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Marauder
  Side                  = GLA
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY MarauderTankGun
    Weapon = TERTIARY TerroristSuicideARealWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY MarauderTankGunUpgradeOne
    Weapon = TERTIARY TerroristSuicideARealWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY MarauderTankGunUpgradeTwo	;[B]
    Weapon = TERTIARY TerroristSuicideARealWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_AI FROM_SCRIPT
    AutoChooseSources = TERTIARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 850          ;[B]800
  BuildTime       = 16.0 ;8.0    ;[B]10 in seconds
  VisionRange     = 125
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Science = SCIENCE_ToxinWeapons 
  End

  ExperienceValue = 80 80 140 250 ;[B]100 100 200 300    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = Demo_GLATankMarauderCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = MarauderTankVoiceSelect
  VoiceMove = MarauderTankVoiceMove
  VoiceGuard = MarauderTankVoiceMove
  VoiceAttack = MarauderTankVoiceAttack
  SoundMoveStart = MarauderTankMoveStart
  SoundMoveStartDamaged = MarauderTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = MarauderTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceSalvage = MarauderTankVoiceSalvage      
    VoiceCrush = MarauderTankVoiceCrush
    VoiceEnter = MarauderTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 490.0	;[B] 430.0
    InitialHealth   = 490.0	;[B] 430.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 860
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret 	;[B]
       TurretTurnRate = 70 ;099=60 [B] turn rate, in degrees per sec
       ControlledWeaponSlots = PRIMARY
    end 
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL MarauderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_MarauderTankDeathEffect  
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End


  Behavior = CreateCrateDie ModuleTag_07
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End


;[B] Makes building the decoy slave possible
  Behavior = ProductionUpdate ModuleTag_10
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

;[B] The "Decoy" creation upgrade
  Behavior = ObjectCreationUpgrade ModuleTag_11
    UpgradeObject = OCL_GLATankMarauderDecoy
    TriggeredBy = Upgrade_GLATankMarauderDecoy
  End

  Behavior = WeaponBonusUpgrade ModuleTag_12	;[B] Toxin Reloader
    TriggeredBy = Upgrade_GLAToxinShells;
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE 
  End

  Behavior = CommandSetUpgrade ModuleTag_24
    CommandSet = Demo_GLATankMarauderCommandSetUpgrade
    TriggeredBy = Demo_Upgrade_SuicideBomb
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 9.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;GLA Radar Van
Object CTFGLAVehicleRadarVan

  ; *** ART Parameters ***
  SelectPortrait         = SURadarVan_L
  ButtonImage            = SURadarVan
  
  UpgradeCameo1 = Upgrade_GLARadarVanScan
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Demo_Upgrade_SuicideBomb ;[B]
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
    End
    
    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RadarVan
  Side = GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = TERTIARY TerroristSuicideNotARealWeapon	;[B]
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End

  ArmorSet
    Conditions      = CRATE_UPGRADE_ONE
    Armor           = TruckEnhancedArmor ;[B]Resistant to laser Burton and air threats
    DamageFX        = TruckDamageFX
  End

  BuildCost       = 750 ;500
  BuildTime       = 5.0          ;[B]10 in v1; in seconds
  VisionRange     = 200
  ShroudClearingRange = 500
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
  End
  IsTrainable = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLAVehicleRadarVanCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL


  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200
    InitialHealth   = 200

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

  Behavior = GrantUpgradeCreate ModuleTag_03
    UpgradeToGrant     = Upgrade_GLARadar
  End
  Behavior        = RadarUpgrade ModuleTag_05
    TriggeredBy   = Upgrade_GLARadar
    DisableProof  = Yes ; Won't be disabled by power low
  End

  Behavior           = OCLSpecialPower ModuleTag_06
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    OCL                  = SUPERWEAPON_RadarVanScan
    CreateLocation       = CREATE_AT_LOCATION
    StartsPaused         = Yes ; Unpaused by upgrade module
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_07
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 100
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL RadarVanLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 50.0
  End

; The default explosion
  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RadarVanDeathEffect
  End


  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = StealthDetectorUpdate ModuleTag_16
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_17
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_18
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End

;[B] Camouflage
  Behavior = StealthUpdate ModuleTag_20
    StealthDelay                = 1500 ; msec
    StealthForbiddenConditions  = MOVING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_21
    TriggeredBy = Upgrade_GLACamouflage
  End

;[B] Suicide Stuff
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_George 
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = ALL
  End;

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    DeathWeapon   = Demo_SuicideDynamitePack ;[B]PlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    DeathTypes = NONE
  End
  
  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 12.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ;minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object CTFGLAVehicleBattleBus

  ; *** ART Parameters ***
  SelectPortrait         = SUbattlebus_L
  ButtonImage            = SUbattlebus
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    ExtraPublicBone = BUSUP01
    ExtraPublicBone = BUSUP02
    
    DefaultConditionState
      Model = UVBATTBUS
      HideSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = MANUAL
    End
    ConditionState = MOVING
      Model = UVBATTBUS
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = UVBATTBUS_D
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = MANUAL
    End
    ConditionState = REALLYDAMAGED MOVING
      Model = UVBATTBUS_D
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = LOOP
    End

    ConditionState = SECOND_LIFE ; Set after our first death, natch
      Model = UVBATTBUS_D1
      Animation = UVBATTBUS_D1.UVBATTBUS_D1
      AnimationMode = MANUAL
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE
    AliasConditionState = RUBBLE SECOND_LIFE
    
    ConditionState = RUBBLE
      Model = UVBATTBUS_D
    End

;--------- One crates
    ConditionState = ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = MANUAL
    End
    ConditionState = MOVING ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = MANUAL
    End
    ConditionState = REALLYDAMAGED MOVING ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = LOOP
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS_D1
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
      Animation = UVBATTBUS_D1.UVBATTBUS_D1
      AnimationMode = MANUAL
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
    
    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_ONE
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01
      HideSubObject = BUSUP02
    End

;--------- Two crates
    ConditionState = ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS
      ShowSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = MANUAL
    End
    ConditionState = MOVING ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS
      ShowSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS.UVBATTBUS
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = MANUAL
    End
    ConditionState = REALLYDAMAGED MOVING ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS_D.UVBATTBUS_D
      AnimationMode = LOOP
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS_D1
      ShowSubObject = BUSUP01 BUSUP02
      Animation = UVBATTBUS_D1.UVBATTBUS_D1
      AnimationMode = MANUAL
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO 
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO
    
    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_TWO
      Model = UVBATTBUS_D
      ShowSubObject = BUSUP01 BUSUP02
    End

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire04
    LeftRearTireBone = Tire02
    RightRearTireBone = Tire03
    TireRotationMultiplier = 0.2   ; this * speed = rotation.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

  End
  PlacementViewAngle = 180
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BattleBus
  Side = GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 8                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None 
    Weapon = SECONDARY   BattleBusDummyWeapon
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY BattleBusPassengerDummyWeapon 
    Weapon              = SECONDARY   BattleBusDummyWeapon ;[B]Dummy weapon, enables air targetting
;    Weapon 		= TERTIARY TerroristSuicideNotARealWeapon ;[B]
  End

  ArmorSet
    Conditions      = None
    Armor           = BattleBusTruckArmor
    DamageFX        = TruckDamageFX
  End
  ArmorSet
    Conditions      = SECOND_LIFE ; Set after our first death, natch
    Armor           = BattleBusStructureArmorTough
    DamageFX        = StructureDamageFX
  End

  ArmorSet
    Conditions      = CRATE_UPGRADE_ONE
    Armor           = BattleBusTruckArmorPlusOne
    DamageFX        = TruckDamageFX
  End
  ArmorSet
    Conditions      = CRATE_UPGRADE_ONE SECOND_LIFE ; Set after our first death, natch
    Armor           = BattleBusStructureArmorToughPlusOne
    DamageFX        = StructureDamageFX
  End

  ArmorSet
    Conditions      = CRATE_UPGRADE_TWO
    Armor           = BattleBusTruckArmorPlusTwo
    DamageFX        = TruckDamageFX
  End
  ArmorSet
    Conditions      = CRATE_UPGRADE_TWO SECOND_LIFE ; Set after our first death, natch
    Armor           = BattleBusStructureArmorToughPlusTwo
    DamageFX        = StructureDamageFX
  End

  BuildCost       = 2200  ;1100 ;[B]1000
  BuildTime       = 20.0          ;[B]15 in seconds    
  VisionRange     = 150 ; Used in attack move targeting
  ShroudClearingRange     = 200
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFGLAPalace
    Object = CTFFlagSilver ;# CTF
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAVehicleBattleBusCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleBusVoiceSelect
  VoiceMove = BattleBusVoiceMove
  VoiceGuard = BattleBusVoiceMove
  VoiceAttack = BattleBusVoiceAttack
  SoundMoveStart = BattleBusMoveStart
  SoundMoveStartDamaged = BattleBusMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate= BattleBusVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = NoSound
    VoiceUnload                   = BattleBusVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER ARMOR_SALVAGER TRANSPORT SCORE ;[B]Transport added to make it easier for AI

  Body = UndeadBody ModuleTag_02 ; Body module that treats the first death as a state change
    MaxHealth           = 400.0
    InitialHealth       = 400.0

    SecondLifeMaxHealth = 900 ;975[B]650.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 750
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  IsTrainable = No
  ExperienceValue     = 150 200 300 450 ;[B]50 50 50 50  ; Experience point value at each level

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Locomotor = SET_NORMAL BattleBusLocomotor

  Behavior = BattleBusSlowDeathBehavior  ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED -EXTRA_4
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely

    ; Part the first, uses when killed the first time from non-system (unresistable) damage
    FXStartUndeath = FX_BattleBusStartUndeath
    OCLStartUndeath = OCL_BattleBusStartUndeath
    FXHitGround = FX_BattleBusHitGround
    OCLHitGround = OCL_BattleBusHitGround
    ThrowForce = 100.0
    PercentDamageToPassengers = 60% ;75 [B]50%
    EmptyHulkDestructionDelay = 1000 ; If non-zero, msec of emptiness before we kill ourselves with Penalty damage

    ; Part the second, normal fields of a SlowDeathBehavior
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BattleBusDeath
  End

  Behavior = TransportContain  ModuleTag_10
    PassengersAllowedToFire = Yes
    Slots             = 8
    DamagePercentToUnits = 100%
    AllowInsideKindOf  = INFANTRY
    ExitDelay = 350 ;500[B]250
    NumberOfExitPaths = 5 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    WeaponBonusPassedToPassengers = Yes
    DelayExitInAir = Yes
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

; Module 11 cut.
;  Behavior = HordeUpdate ModuleTag_11
;    RubOffRadius = 150    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
;    UpdateRate = 1000     ; how often to recheck horde status (msec)
;    Radius = 75           ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
;    AlliesOnly = Yes      ; do we only count allies towards horde status? 
;    ExactMatch = Yes      ; do we only count units of our exact same type towards horde status? (overrides kindof)
;    Count = 5             ; how many units must be within Radius to grant us horde-ness
;    Action = HORDE        ; when horde-ing, grant us the HORDE bonus
;  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
  End
  
  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = SlowDeathBehavior ModuleTag_30 // Empty Hulk sinking away
    DeathTypes = NONE +EXTRA_4

    SinkDelay = 1
    SinkRate = 2.5
    DestructionDelay = 5000
  End

  Behavior                 = TransitionDamageFX ModuleTag_31
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

; Crusader XL
;------------------------------------------------------------------------------
Object CTFAmericaTankCrusader

  ; *** ART Parameters ***
  SelectPortrait         = SACLeopard_L
  ButtonImage            = SACLeopard
  
  UpgradeCameo1 = Upgrade_AmericaBattleDrone
;  UpgradeCameo2 = Upgrade_AmericaScoutDrone
;  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo2 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo3 = Upgrade_AmericaCompositeArmor
  
  Draw = W3DTankDraw ModuleTag_01
    DefaultConditionState
      Model               = AVLeopard
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY TurretMS
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
    End
    ConditionState       = REALLYDAMAGED
      Model              = AVLeopard_D
    End
    ConditionState       = RUBBLE
      Model              = AVLeopard_D
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
    OkToChangeModelColor = Yes
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Crusader
  Side                   = America
  EditorSorting          = VEHICLE
  TransportSlotCount     = 3
  WeaponSet
    Conditions           = None 
    Weapon               = PRIMARY CrusaderTankGun
    ; Uncomment this when we want the crusader to have a machine too again
    ;Weapon               = SECONDARY CrusaderMachineGun
  End
  ArmorSet
    Conditions           = None
    Armor                = TankArmor
    DamageFX             = TankDamageFX
  End
  BuildCost              = 1500 ;900
  BuildTime              = 20.0          ;in seconds    
  VisionRange            = 150
  ShroudClearingRange = 300
  EnergyProduction = -1	;[B]Doesn't turn off though
  Prerequisites
    Object = CTFAmericaWarFactory
;    Object = CTFAmericaStrategyCenter
    Object = CTFFlagSilver ;##CTF
  End
  ExperienceValue        = 100 100 200 400 ;Experience point value at each level
  ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level
  IsTrainable            = Yes  ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = AmericaTankCrusaderCommandSet
  
  ; *** AUDIO Parameters ***
  VoiceSelect           = CrusaderTankVoiceSelect
  VoiceMove             = CrusaderTankVoiceMove
  VoiceGuard            = CrusaderTankVoiceMove
  VoiceAttack           = CrusaderTankVoiceAttack
  SoundMoveStart        = CrusaderTankMoveStart
  SoundMoveStartDamaged = CrusaderTankMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = CrusaderTankVoiceCreate
    VoiceEnter             = CrusaderTankVoiceMove
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
    SoundEject          = PilotSoundEject
    VoiceEject          = PilotVoiceEject
    VoiceCrush          = CrusaderTankVoiceCrush
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body                   = ActiveBody ModuleTag_02
    MaxHealth       = 600 ;[B]480
    InitialHealth   = 600 ;[B]480

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 960
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate       = 180 ;60   // turn rate, in degrees per sec
      ControlledWeaponSlots= PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor            = SET_NORMAL CrusaderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass                 = 50.0
  End

  Behavior = ObjectCreationUpgrade ModuleTag_05
    UpgradeObject = OCL_AmericanXLBattleDrone
    TriggeredBy   = Upgrade_AmericaXLBattleDrone
  End

  Behavior = ProductionUpdate ModuleTag_07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_08
    TriggeredBy   = Upgrade_AmericaAdvancedTraining
    AddXPScalar   = 1.0 ;Increases experience gained by an additional 100%
  End

  ; Turret fly off death
  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier  = 50
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_GenericTankDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_CrusaderTurret
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier  = 50
    DestructionDelay  = 2000
    DestructionDelayVariance  = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_GenericTankDeathEffect  
    FX  = FINAL    FX_GenericTankDeathExplosion
  End

  Behavior                 = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_15
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior                    = CreateCrateDie ModuleTag_CratesChange
   CrateData             = SalvageCrateData
   ;CrateData             = EliteTankCrateData
   ;CrateData             = HeroicTankCrateData
  End

  Behavior = EjectPilotDie ModuleTag_17
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
    ExemptStatus = HIJACKED
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
  End

  Behavior = MaxHealthUpgrade ModuleTag_18
    TriggeredBy   = Upgrade_AmericaCompositeArmor
    AddMaxHealth  = 80.0 ;[B]100.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry               = BOX
  GeometryMajorRadius    = 15.0
  GeometryMinorRadius    = 10.0
  GeometryHeight         = 10.0     
  GeometryIsSmall        = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End
